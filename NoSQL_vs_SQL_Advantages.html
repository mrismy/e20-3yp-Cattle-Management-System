<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>NoSQL Advantages & OOP Concepts ‚Äî Cattle Management System</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=Fira+Code:wght@400;500&display=swap');

        :root {
            --bg: #ffffff;
            --bg-secondary: #f4f6f9;
            --bg-card: #ffffff;
            --text: #1a1a2e;
            --text-secondary: #555770;
            --accent: #4f46e5;
            --accent-light: #e0e7ff;
            --border: #e2e5ed;
            --code-bg: #f1f5f9;
            --code-text: #1e293b;
            --table-header: #4f46e5;
            --table-header-text: #ffffff;
            --table-row-alt: #f8fafc;
            --shadow: 0 4px 24px rgba(0, 0, 0, 0.06);
            --tag-bg: #e0e7ff;
            --tag-text: #4338ca;
            --warning-bg: #fffbeb;
            --warning-border: #f59e0b;
            --warning-text: #92400e;
            --sidebar-bg: rgba(255, 255, 255, 0.92);
            --sidebar-hover: #f0f0ff;
            --sidebar-active: #4f46e5;
            --transition: 0.35s cubic-bezier(.4, 0, .2, 1);
            --green-accent: #059669;
            --green-light: #d1fae5;
            --green-tag: #065f46;
            --orange-accent: #ea580c;
            --orange-light: #fff7ed;
            --orange-tag: #9a3412;
            --purple-accent: #9333ea;
            --purple-light: #faf5ff;
            --purple-tag: #581c87;
            --cyan-accent: #06b6d4;
            --cyan-light: #ecfeff;
            --cyan-tag: #155e75;
        }

        [data-theme="dark"] {
            --bg: #0f172a;
            --bg-secondary: #1e293b;
            --bg-card: #1e293b;
            --text: #e2e8f0;
            --text-secondary: #94a3b8;
            --accent: #818cf8;
            --accent-light: #312e81;
            --border: #334155;
            --code-bg: #0f172a;
            --code-text: #e2e8f0;
            --table-header: #4338ca;
            --table-header-text: #e0e7ff;
            --table-row-alt: #1a2336;
            --shadow: 0 4px 24px rgba(0, 0, 0, 0.3);
            --tag-bg: #312e81;
            --tag-text: #a5b4fc;
            --warning-bg: #451a03;
            --warning-border: #d97706;
            --warning-text: #fde68a;
            --sidebar-bg: rgba(30, 41, 59, 0.96);
            --sidebar-hover: #334155;
            --sidebar-active: #818cf8;
            --green-accent: #34d399;
            --green-light: #064e3b;
            --green-tag: #6ee7b7;
            --orange-accent: #fb923c;
            --orange-light: #431407;
            --orange-tag: #fdba74;
            --purple-accent: #c084fc;
            --purple-light: #4c1d95;
            --purple-tag: #e9d5ff;
            --cyan-accent: #22d3ee;
            --cyan-light: #164e63;
            --cyan-tag: #a5f3fc;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--bg);
            color: var(--text);
            line-height: 1.7;
            transition: background var(--transition), color var(--transition);
            -webkit-print-color-adjust: exact;
            print-color-adjust: exact;
        }

        .container {
            max-width: 860px;
            margin: 0 auto;
            padding: 40px 32px 60px;
        }

        /* ====================== */
        /* SIDEBAR NAVIGATION     */
        /* ====================== */
        .sidebar {
            position: fixed;
            top: 50%;
            right: 0;
            transform: translateY(-50%);
            z-index: 999;
            width: 280px;
            border-radius: 12px 0 0 12px;
            overflow: hidden;
        }

        .sidebar-inner {
            background: var(--sidebar-bg);
            backdrop-filter: blur(16px);
            -webkit-backdrop-filter: blur(16px);
            border: 1px solid var(--border);
            border-right: none;
            border-radius: 12px 0 0 12px;
            padding: 16px 0;
            box-shadow: -4px 0 24px rgba(0, 0, 0, 0.08);
            max-height: 80vh;
            overflow-y: auto;
        }

        .sidebar-title {
            font-size: 11px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1.8px;
            color: var(--text-secondary);
            padding: 6px 16px 12px;
            white-space: nowrap;
            opacity: 1;
        }

        .sidebar-section-label {
            font-size: 10px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1.5px;
            color: var(--accent);
            padding: 10px 16px 4px;
            white-space: nowrap;
            opacity: 1;
            cursor: pointer;
            transition: all 0.25s ease;
        }

        .sidebar-section-label:hover {
            color: var(--sidebar-active);
            padding-left: 20px;
        }

        .sidebar-link {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 8px 16px;
            font-size: 13px;
            font-weight: 500;
            color: var(--text-secondary);
            text-decoration: none;
            white-space: nowrap;
            transition: all 0.2s ease;
            cursor: pointer;
            border-left: 3px solid transparent;
        }

        .sidebar-link:hover {
            background: var(--sidebar-hover);
            color: var(--sidebar-active);
            border-left-color: var(--sidebar-active);
        }

        .sidebar-link .link-icon {
            font-size: 16px;
            flex-shrink: 0;
            width: 22px;
            text-align: center;
        }

        .sidebar-link .link-text {
            opacity: 1;
            overflow: hidden;
        }

        .sidebar-divider {
            height: 1px;
            background: var(--border);
            margin: 8px 12px;
        }

        /* Sidebar handle indicator - hidden when locked */
        .sidebar-handle {
            display: none;
        }

        .sidebar-handle-dot {
            width: 4px;
            height: 4px;
            border-radius: 50%;
            background: var(--text-secondary);
            margin: 3px auto;
            display: block;
        }

        /* ====================== */
        /* DARK MODE TOGGLE       */
        /* ====================== */
        .theme-toggle {
            position: fixed;
            top: 24px;
            right: 60px;
            z-index: 1000;
            background: var(--bg-card);
            border: 2px solid var(--border);
            border-radius: 50px;
            padding: 10px 18px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            font-family: 'Inter', sans-serif;
            font-size: 14px;
            font-weight: 500;
            color: var(--text);
            box-shadow: var(--shadow);
            transition: all var(--transition);
        }

        .theme-toggle:hover {
            border-color: var(--accent);
            transform: translateY(-1px);
            box-shadow: 0 6px 28px rgba(79, 70, 229, 0.15);
        }

        .theme-toggle .icon {
            font-size: 18px;
        }

        @media print {

            .theme-toggle,
            .sidebar {
                display: none !important;
            }

            body {
                background: #fff;
                color: #000;
            }

            .container {
                max-width: 100%;
            }
        }

        /* ====================== */
        /* HEADER                 */
        /* ====================== */
        .report-header {
            text-align: center;
            margin-bottom: 48px;
            padding-bottom: 36px;
            border-bottom: 2px solid var(--border);
        }

        .report-header .tag {
            display: inline-block;
            background: var(--tag-bg);
            color: var(--tag-text);
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1.5px;
            padding: 6px 16px;
            border-radius: 50px;
            margin-bottom: 20px;
        }

        .report-header h1 {
            font-size: 30px;
            font-weight: 800;
            line-height: 1.25;
            margin-bottom: 12px;
            background: linear-gradient(135deg, var(--accent), #7c3aed);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .report-header .subtitle {
            font-size: 16px;
            color: var(--text-secondary);
            font-weight: 400;
        }

        .report-header .meta {
            margin-top: 16px;
            font-size: 13px;
            color: var(--text-secondary);
        }

        /* ====================== */
        /* TABLE OF CONTENTS      */
        /* ====================== */
        .toc {
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 14px;
            padding: 28px 32px;
            margin-bottom: 44px;
            box-shadow: var(--shadow);
        }

        .toc h2 {
            font-size: 18px;
            font-weight: 700;
            margin: 0 0 16px;
            border: none;
            padding: 0;
            color: var(--accent);
        }

        .toc-columns {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 8px 32px;
        }

        .toc-section-title {
            grid-column: 1 / -1;
            font-size: 12px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1.2px;
            color: var(--text-secondary);
            margin-top: 10px;
            padding-bottom: 4px;
            border-bottom: 1px solid var(--border);
        }

        .toc-section-title:first-child {
            margin-top: 0;
        }

        .toc a {
            color: var(--text-secondary);
            text-decoration: none;
            font-size: 14px;
            font-weight: 500;
            padding: 4px 0;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.2s;
        }

        .toc a:hover {
            color: var(--accent);
            padding-left: 6px;
        }

        .toc a .toc-icon {
            font-size: 14px;
            flex-shrink: 0;
        }

        /* ====================== */
        /* SECTION HEADERS        */
        /* ====================== */
        .section-divider {
            margin: 56px 0 0;
            padding-top: 20px;
            border-top: 3px solid var(--accent);
            text-align: center;
        }

        .section-divider .section-tag {
            display: inline-block;
            background: var(--accent);
            color: #fff;
            font-size: 12px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 2px;
            padding: 6px 22px;
            border-radius: 50px;
            margin-bottom: 8px;
        }

        .section-divider.green-section {
            border-top-color: var(--green-accent);
        }

        .section-divider.green-section .section-tag {
            background: var(--green-accent);
        }

        .section-divider.orange-section {
            border-top-color: var(--orange-accent);
        }

        .section-divider.orange-section .section-tag {
            background: var(--orange-accent);
        }

        .section-divider.purple-section {
            border-top-color: var(--purple-accent);
        }

        .section-divider.purple-section .section-tag {
            background: var(--purple-accent);
        }

        .section-divider.cyan-section {
            border-top-color: var(--cyan-accent);
        }

        .section-divider.cyan-section .section-tag {
            background: var(--cyan-accent);
        }

        h2 {
            font-size: 22px;
            font-weight: 700;
            margin: 32px 0 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--accent);
            display: flex;
            align-items: center;
            gap: 10px;
            scroll-margin-top: 24px;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        h2:hover {
            color: var(--accent);
            transform: translateX(5px);
        }

        h2 .num {
            background: var(--accent);
            color: #fff;
            font-size: 14px;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        h3 {
            font-size: 18px;
            font-weight: 600;
            margin: 28px 0 12px;
            color: var(--accent);
            scroll-margin-top: 24px;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        h3:hover {
            color: var(--sidebar-active);
            transform: translateX(3px);
        }

        p {
            margin-bottom: 14px;
            color: var(--text);
        }

        /* ====================== */
        /* CARDS                  */
        /* ====================== */
        .advantage-card {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 14px;
            padding: 24px 28px;
            margin-bottom: 20px;
            box-shadow: var(--shadow);
            transition: all var(--transition);
            border-left: 4px solid var(--accent);
            scroll-margin-top: 24px;
        }

        .advantage-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 32px rgba(79, 70, 229, 0.12);
        }

        .advantage-card.green-card {
            border-left-color: var(--green-accent);
        }

        .advantage-card.green-card:hover {
            box-shadow: 0 8px 32px rgba(5, 150, 105, 0.12);
        }

        .advantage-card h3 {
            margin-top: 0;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .advantage-card.green-card h3 {
            color: var(--green-accent);
        }

        .advantage-card.orange-card {
            border-left-color: var(--orange-accent);
        }

        .advantage-card.orange-card:hover {
            box-shadow: 0 8px 32px rgba(234, 88, 12, 0.12);
        }

        .advantage-card.orange-card h3 {
            color: var(--orange-accent);
        }

        .advantage-card.purple-card {
            border-left-color: var(--purple-accent);
        }

        .advantage-card.purple-card:hover {
            box-shadow: 0 8px 32px rgba(147, 51, 234, 0.12);
        }

        .advantage-card.purple-card h3 {
            color: var(--purple-accent);
        }

        .advantage-card.cyan-card {
            border-left-color: var(--cyan-accent);
        }

        .advantage-card.cyan-card:hover {
            box-shadow: 0 8px 32px rgba(6, 182, 212, 0.12);
        }

        .advantage-card.cyan-card h3 {
            color: var(--cyan-accent);
        }

        .advantage-card h3 .emoji {
            font-size: 24px;
        }

        .advantage-card ul {
            padding-left: 22px;
            margin-bottom: 0;
        }

        .advantage-card ul li {
            margin-bottom: 6px;
            color: var(--text-secondary);
        }

        .advantage-card ul li strong {
            color: var(--text);
        }

        /* ====================== */
        /* CODE BLOCKS            */
        /* ====================== */
        pre {
            background: var(--code-bg);
            color: var(--code-text);
            border: 1px solid var(--border);
            border-radius: 10px;
            padding: 18px 22px;
            margin: 14px 0 18px;
            overflow-x: auto;
            font-family: 'Fira Code', 'Consolas', monospace;
            font-size: 13.5px;
            line-height: 1.65;
        }

        code {
            font-family: 'Fira Code', 'Consolas', monospace;
            background: var(--code-bg);
            padding: 2px 7px;
            border-radius: 5px;
            font-size: 13.5px;
            color: var(--accent);
        }

        pre code {
            background: none;
            padding: 0;
            color: inherit;
        }

        .keyword {
            color: #7c3aed;
            font-weight: 600;
        }

        .string {
            color: #059669;
        }

        .comment {
            color: #94a3b8;
            font-style: italic;
        }

        .property {
            color: #2563eb;
        }

        .number {
            color: #d97706;
        }

        [data-theme="dark"] .keyword {
            color: #c084fc;
        }

        [data-theme="dark"] .string {
            color: #34d399;
        }

        [data-theme="dark"] .comment {
            color: #64748b;
        }

        [data-theme="dark"] .property {
            color: #60a5fa;
        }

        [data-theme="dark"] .number {
            color: #fbbf24;
        }

        /* ====================== */
        /* TABLE                  */
        /* ====================== */
        .comparison-table {
            width: 100%;
            border-collapse: separate;
            border-spacing: 0;
            border-radius: 12px;
            overflow: hidden;
            margin: 20px 0;
            box-shadow: var(--shadow);
            border: 1px solid var(--border);
        }

        .comparison-table thead th {
            background: var(--table-header);
            color: var(--table-header-text);
            font-weight: 600;
            padding: 14px 20px;
            text-align: left;
            font-size: 14px;
        }

        .comparison-table tbody td {
            padding: 13px 20px;
            border-bottom: 1px solid var(--border);
            font-size: 14px;
            color: var(--text-secondary);
        }

        .comparison-table tbody tr:nth-child(even) {
            background: var(--table-row-alt);
        }

        .comparison-table tbody tr:last-child td {
            border-bottom: none;
        }

        /* ====================== */
        /* WARNING BOX            */
        /* ====================== */
        .warning-box {
            background: var(--warning-bg);
            border: 1px solid var(--warning-border);
            border-left: 4px solid var(--warning-border);
            border-radius: 10px;
            padding: 18px 22px;
            margin: 24px 0;
            color: var(--warning-text);
        }

        .warning-box .warning-title {
            font-weight: 700;
            font-size: 15px;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        /* ====================== */
        /* FOOTER                 */
        /* ====================== */
        .report-footer {
            text-align: center;
            margin-top: 56px;
            padding-top: 28px;
            border-top: 2px solid var(--border);
            font-size: 13px;
            color: var(--text-secondary);
        }

        @media print {
            .container {
                padding: 20px;
            }

            .advantage-card {
                break-inside: avoid;
                box-shadow: none;
            }

            .advantage-card:hover {
                transform: none;
            }

            .comparison-table {
                break-inside: avoid;
            }

            .toc {
                break-inside: avoid;
            }
        }

        /* Smooth scroll */
        html {
            scroll-behavior: smooth;
        }
    </style>
</head>

<body>

    <!-- Dark Mode Toggle -->
    <button class="theme-toggle" onclick="toggleTheme()" aria-label="Toggle dark mode">
        <span class="icon" id="themeIcon">üåô</span>
        <span id="themeLabel">Dark Mode</span>
    </button>

    <!-- Sidebar Navigation -->
    <nav class="sidebar" aria-label="Section navigation">
        <div class="sidebar-inner">
            <div class="sidebar-handle">
                <span class="sidebar-handle-dot"></span>
                <span class="sidebar-handle-dot"></span>
                <span class="sidebar-handle-dot"></span>
                <span class="sidebar-handle-dot"></span>
                <span class="sidebar-handle-dot"></span>
            </div>
            <div class="sidebar-title">üìë Navigation</div>

            <div class="sidebar-section-label">Part 1 ‚Äî NoSQL Advantages</div>
            <a href="#sec-flexible-schema" class="sidebar-link"><span class="link-icon">üîå</span><span
                    class="link-text">Flexible Schema</span></a>
            <a href="#sec-write-perf" class="sidebar-link"><span class="link-icon">‚ö°</span><span
                    class="link-text">High-Volume Writes</span></a>
            <a href="#sec-aggregation" class="sidebar-link"><span class="link-icon">üìä</span><span
                    class="link-text">Aggregation Pipeline</span></a>
            <a href="#sec-geospatial" class="sidebar-link"><span class="link-icon">üó∫Ô∏è</span><span
                    class="link-text">Geospatial Support</span></a>
            <a href="#sec-document" class="sidebar-link"><span class="link-icon">üì¶</span><span
                    class="link-text">Document Model</span></a>
            <a href="#sec-scaling" class="sidebar-link"><span class="link-icon">üöÄ</span><span
                    class="link-text">Horizontal Scaling</span></a>
            <a href="#sec-js-integration" class="sidebar-link"><span class="link-icon">üîÑ</span><span
                    class="link-text">JS/TS Integration</span></a>
            <a href="#sec-comparison" class="sidebar-link"><span class="link-icon">‚öñÔ∏è</span><span
                    class="link-text">Comparison Table</span></a>

            <div class="sidebar-divider"></div>
            <div class="sidebar-section-label">Part 2 ‚Äî OOP Concepts</div>
            <a href="#oop-encapsulation" class="sidebar-link"><span class="link-icon">üîí</span><span
                    class="link-text">Encapsulation</span></a>
            <a href="#oop-abstraction" class="sidebar-link"><span class="link-icon">üé≠</span><span
                    class="link-text">Abstraction</span></a>
            <a href="#oop-inheritance" class="sidebar-link"><span class="link-icon">üß¨</span><span
                    class="link-text">Inheritance</span></a>
            <a href="#oop-polymorphism" class="sidebar-link"><span class="link-icon">üîÄ</span><span
                    class="link-text">Polymorphism</span></a>
            <a href="#oop-singleton" class="sidebar-link"><span class="link-icon">1Ô∏è‚É£</span><span
                    class="link-text">Singleton Pattern</span></a>
            <a href="#oop-observer" class="sidebar-link"><span class="link-icon">üëÅÔ∏è</span><span
                    class="link-text">Observer Pattern</span></a>
            <a href="#oop-mvc" class="sidebar-link"><span class="link-icon">üèóÔ∏è</span><span class="link-text">MVC
                    Architecture</span></a>
            <a href="#oop-provider" class="sidebar-link"><span class="link-icon">üîó</span><span
                    class="link-text">Provider Pattern</span></a>
            <a href="#oop-soc" class="sidebar-link"><span class="link-icon">üìê</span><span class="link-text">Separation
                    of Concerns</span></a>

            <div class="sidebar-divider"></div>
            <div class="sidebar-section-label">Part 3 ‚Äî Design Principles</div>
            <a href="#solid-srp" class="sidebar-link"><span class="link-icon">üÖ¢</span><span
                    class="link-text">SRP</span></a>
            <a href="#solid-ocp" class="sidebar-link"><span class="link-icon">üÖû</span><span
                    class="link-text">OCP</span></a>
            <a href="#solid-lsp" class="sidebar-link"><span class="link-icon">üÖõ</span><span
                    class="link-text">LSP</span></a>
            <a href="#solid-isp" class="sidebar-link"><span class="link-icon">üÖò</span><span
                    class="link-text">ISP</span></a>
            <a href="#solid-dip" class="sidebar-link"><span class="link-icon">üÖì</span><span
                    class="link-text">DIP</span></a>
            <a href="#prin-dry" class="sidebar-link"><span class="link-icon">üîÅ</span><span
                    class="link-text">DRY</span></a>
            <a href="#prin-kiss" class="sidebar-link"><span class="link-icon">üíã</span><span
                    class="link-text">KISS</span></a>
            <a href="#prin-composition" class="sidebar-link"><span class="link-icon">üß©</span><span
                    class="link-text">Composition</span></a>
            <a href="#prin-middleware" class="sidebar-link"><span class="link-icon">üîó</span><span
                    class="link-text">Middleware</span></a>

            <div class="sidebar-divider"></div>
            <div class="sidebar-section-label">Part 4 ‚Äî Design Patterns</div>
            <a href="#pat-singleton" class="sidebar-link"><span class="link-icon">1Ô∏è‚É£</span><span
                    class="link-text">Singleton</span></a>
            <a href="#pat-observer" class="sidebar-link"><span class="link-icon">üëÅÔ∏è</span><span
                    class="link-text">Observer</span></a>
            <a href="#pat-factory" class="sidebar-link"><span class="link-icon">üè≠</span><span
                    class="link-text">Factory</span></a>
            <a href="#pat-repository" class="sidebar-link"><span class="link-icon">üóÑÔ∏è</span><span
                    class="link-text">Repository</span></a>
            <a href="#pat-chain" class="sidebar-link"><span class="link-icon">‚õìÔ∏è</span><span
                    class="link-text">Chain</span></a>
            <a href="#pat-decorator" class="sidebar-link"><span class="link-icon">üé®</span><span
                    class="link-text">Decorator</span></a>
            <a href="#pat-strategy" class="sidebar-link"><span class="link-icon">üéØ</span><span
                    class="link-text">Strategy</span></a>
            <a href="#pat-recommended" class="sidebar-link"><span class="link-icon">üí°</span><span
                    class="link-text">Recommended</span></a>

            <div class="sidebar-divider"></div>
            <div class="sidebar-section-label">Part 5 ‚Äî API Reference</div>
            <a href="#api-auth" class="sidebar-link"><span class="link-icon">üîê</span><span
                    class="link-text">Authentication</span></a>
            <a href="#api-cattle" class="sidebar-link"><span class="link-icon">üêÑ</span><span
                    class="link-text">Cattle</span></a>
            <a href="#api-sensor" class="sidebar-link"><span class="link-icon">üì°</span><span class="link-text">Sensor
                    Data</span></a>
            <a href="#api-geofence" class="sidebar-link"><span class="link-icon">üåç</span><span
                    class="link-text">Geofence</span></a>
            <a href="#api-config" class="sidebar-link"><span class="link-icon">‚öôÔ∏è</span><span class="link-text">Config &
                    Map</span></a>
        </div>
    </nav>

    <div class="container">
        <!-- ================================= -->
        <!-- HEADER                            -->
        <!-- ================================= -->
        <div class="report-header">
            <span class="tag">Database & Architecture Analysis</span>
            <h1>NoSQL Advantages, OOP & Design Principles</h1>
            <p class="subtitle">Cattle Management System ‚Äî IoT Sensor Platform</p>
            <p class="meta">Project: e20-3yp-Cattle-Management-System &nbsp;|&nbsp; Date: February 14, 2026</p>
        </div>

        <!-- ================================= -->
        <!-- TABLE OF CONTENTS                 -->
        <!-- ================================= -->
        <div class="toc" id="toc">
            <h2>üìã Table of Contents</h2>

            <div class="toc-columns">
                <div class="toc-section-title">Part 1 ‚Äî Advantages of NoSQL (MongoDB) over MySQL</div>
                <a href="#sec-flexible-schema"><span class="toc-icon">üîå</span> 1. Flexible Schema for Sensor Data</a>
                <a href="#sec-write-perf"><span class="toc-icon">‚ö°</span> 2. High-Volume Write Performance</a>
                <a href="#sec-aggregation"><span class="toc-icon">üìä</span> 3. Built-in Aggregation Pipeline</a>
                <a href="#sec-geospatial"><span class="toc-icon">üó∫Ô∏è</span> 4. Native Geospatial Support</a>
                <a href="#sec-document"><span class="toc-icon">üì¶</span> 5. Document Model Matches Data</a>
                <a href="#sec-scaling"><span class="toc-icon">üöÄ</span> 6. Easier Horizontal Scaling</a>
                <a href="#sec-js-integration"><span class="toc-icon">üîÑ</span> 7. JavaScript / TypeScript
                    Integration</a>
                <a href="#sec-comparison"><span class="toc-icon">‚öñÔ∏è</span> When MySQL Would Be Better</a>

                <div class="toc-section-title">Part 2 ‚Äî OOP Concepts Used in the Project</div>
                <a href="#oop-encapsulation"><span class="toc-icon">üîí</span> 1. Encapsulation</a>
                <a href="#oop-abstraction"><span class="toc-icon">üé≠</span> 2. Abstraction</a>
                <a href="#oop-inheritance"><span class="toc-icon">üß¨</span> 3. Inheritance</a>
                <a href="#oop-polymorphism"><span class="toc-icon">üîÄ</span> 4. Polymorphism</a>
                <a href="#oop-singleton"><span class="toc-icon">1Ô∏è‚É£</span> 5. Singleton Pattern</a>
                <a href="#oop-observer"><span class="toc-icon">üëÅÔ∏è</span> 6. Observer Pattern</a>
                <a href="#oop-mvc"><span class="toc-icon">üèóÔ∏è</span> 7. MVC Architecture</a>
                <a href="#oop-provider"><span class="toc-icon">üîó</span> 8. Provider Pattern</a>
                <a href="#oop-soc"><span class="toc-icon">üìê</span> 9. Separation of Concerns</a>

                <div class="toc-section-title">Part 3 ‚Äî SOLID & Design Principles</div>
                <a href="#solid-srp"><span class="toc-icon">üÖ¢</span> SRP ‚Äî Single Responsibility</a>
                <a href="#solid-ocp"><span class="toc-icon">üÖû</span> OCP ‚Äî Open/Closed</a>
                <a href="#solid-lsp"><span class="toc-icon">üÖõ</span> LSP ‚Äî Liskov Substitution</a>
                <a href="#solid-isp"><span class="toc-icon">üÖò</span> ISP ‚Äî Interface Segregation</a>
                <a href="#solid-dip"><span class="toc-icon">üÖì</span> DIP ‚Äî Dependency Inversion</a>
                <a href="#prin-dry"><span class="toc-icon">üîÅ</span> DRY ‚Äî Don't Repeat Yourself</a>
                <a href="#prin-kiss"><span class="toc-icon">üíã</span> KISS ‚Äî Keep It Simple</a>
                <a href="#prin-composition"><span class="toc-icon">üß©</span> Composition over Inheritance</a>
                <a href="#prin-middleware"><span class="toc-icon">üîó</span> Middleware Pipeline</a>

                <div class="toc-section-title">Part 4 ‚Äî Design Patterns</div>
                <a href="#pat-singleton"><span class="toc-icon">1Ô∏è‚É£</span> Singleton Pattern</a>
                <a href="#pat-observer"><span class="toc-icon">üëÅÔ∏è</span> Observer Pattern</a>
                <a href="#pat-factory"><span class="toc-icon">üè≠</span> Factory Pattern</a>
                <a href="#pat-repository"><span class="toc-icon">üóÑÔ∏è</span> Repository Pattern</a>
                <a href="#pat-chain"><span class="toc-icon">‚õìÔ∏è</span> Chain of Responsibility</a>
                <a href="#pat-decorator"><span class="toc-icon">üé®</span> Decorator Pattern</a>
                <a href="#pat-strategy"><span class="toc-icon">üéØ</span> Strategy Pattern</a>
                <a href="#pat-recommended"><span class="toc-icon">üí°</span> Recommended Patterns</a>

                <div class="toc-section-title">Part 5 ‚Äî API Reference</div>
                <a href="#api-auth"><span class="toc-icon">üîê</span> Authentication APIs</a>
                <a href="#api-cattle"><span class="toc-icon">üêÑ</span> Cattle Management APIs</a>
                <a href="#api-sensor"><span class="toc-icon">üì°</span> Sensor Data APIs</a>
                <a href="#api-geofence"><span class="toc-icon">üåç</span> Geofence APIs</a>
                <a href="#api-threshold"><span class="toc-icon">üìè</span> Threshold APIs</a>
                <a href="#api-notifications"><span class="toc-icon">üîî</span> Notification APIs</a>
                <a href="#api-config"><span class="toc-icon">‚öôÔ∏è</span> Map & Config APIs</a>
            </div>
        </div>

        <!-- ======================================================= -->
        <!-- PART 1: NoSQL ADVANTAGES                                 -->
        <!-- ======================================================= -->
        <div class="section-divider">
            <span class="section-tag">Part 1</span>
            <h2 style="justify-content:center; border:none; padding:0; margin:8px 0 28px;">Advantages of NoSQL (MongoDB)
                Over MySQL</h2>
        </div>

        <!-- 1 -->
        <div class="advantage-card" id="sec-flexible-schema">
            <h3><span class="emoji">üîå</span> 1. Flexible Schema for Sensor Data</h3>
            <p>The <code>sensorData</code> model stores heart rate, temperature, and GPS coordinates. With NoSQL:</p>
            <ul>
                <li>You can easily <strong>add new sensor fields</strong> (e.g., humidity, activity level) without
                    running <code>ALTER TABLE</code> migrations.</li>
                <li>Different sensor devices can send <strong>different data structures</strong> ‚Äî MongoDB handles this
                    naturally.</li>
                <li>In MySQL, every schema change requires a migration and potential downtime.</li>
            </ul>
        </div>

        <!-- 2 -->
        <div class="advantage-card" id="sec-write-perf">
            <h3><span class="emoji">‚ö°</span> 2. High-Volume Write Performance (IoT / MQTT)</h3>
            <p>The system receives <strong>real-time data via MQTT</strong> (<code>mqttClient.ts</code>). IoT sensor
                data is written every few seconds per device.</p>
            <ul>
                <li>MongoDB handles <strong>high-throughput writes</strong> better than MySQL for this use case.</li>
                <li>No row-level locking overhead like MySQL's InnoDB engine.</li>
                <li>MongoDB can <strong>batch inserts</strong> efficiently for time-series data.</li>
            </ul>
        </div>

        <!-- 3 -->
        <div class="advantage-card" id="sec-aggregation">
            <h3><span class="emoji">üìä</span> 3. Built-in Aggregation Pipeline</h3>
            <p>The codebase uses MongoDB's <strong>aggregation framework</strong> in <code>sensorDataRoutes.ts</code>:
            </p>
            <pre><code><span class="keyword">await</span> sensorData.<span class="property">aggregate</span>([
  { <span class="property">$sort</span>: { <span class="property">createdAt</span>: <span class="number">-1</span> } },
  { <span class="property">$group</span>: {
      <span class="property">_id</span>: <span class="string">'$deviceId'</span>,
      <span class="property">doc</span>: { <span class="property">$first</span>: <span class="string">'$$ROOT'</span> }
  }},
  { <span class="property">$replaceRoot</span>: { <span class="property">newRoot</span>: <span class="string">'$doc'</span> } },
]);</code></pre>
            <p>More natural and expressive than complex SQL <code>GROUP BY</code> + subqueries. Ideal for daily, weekly,
                and monthly averages.</p>
        </div>

        <!-- 4 -->
        <div class="advantage-card" id="sec-geospatial">
            <h3><span class="emoji">üó∫Ô∏è</span> 4. Native Geospatial Support</h3>
            <p>The system uses <strong>GPS location data</strong> and <strong>geofencing</strong>
                (<code>geoFenceModel.ts</code>).</p>
            <ul>
                <li>MongoDB has <strong>native geospatial indexes</strong> (<code>2dsphere</code>) and operators
                    (<code>$geoWithin</code>, <code>$near</code>).</li>
                <li>In MySQL, geospatial queries require less intuitive <code>ST_*</code> functions.</li>
            </ul>
        </div>

        <!-- 5 -->
        <div class="advantage-card" id="sec-document">
            <h3><span class="emoji">üì¶</span> 5. Document Model Matches the Data</h3>
            <p>The data is <strong>naturally hierarchical</strong> ‚Äî each sensor reading is a self-contained document:
            </p>
            <pre><code>{
  <span class="property">deviceId</span>: <span class="number">1</span>,
  <span class="property">heartRate</span>: <span class="number">72</span>,
  <span class="property">temperature</span>: <span class="number">38.5</span>,
  <span class="property">gpsLocation</span>: {
    <span class="property">longitude</span>: <span class="number">80.2</span>,
    <span class="property">latitude</span>: <span class="number">7.3</span>   <span class="comment">// nested object</span>
  }
}</code></pre>
            <p>In MySQL, you'd need to <strong>flatten this</strong> or create <strong>separate tables</strong> with
                JOINs.</p>
        </div>

        <!-- 6 -->
        <div class="advantage-card" id="sec-scaling">
            <h3><span class="emoji">üöÄ</span> 6. Easier Horizontal Scaling</h3>
            <ul>
                <li>MongoDB scales horizontally through <strong>sharding</strong> (splitting data across servers).</li>
                <li>MySQL primarily scales <strong>vertically</strong> (bigger server), which is more expensive.</li>
            </ul>
        </div>

        <!-- 7 -->
        <div class="advantage-card" id="sec-js-integration">
            <h3><span class="emoji">üîÑ</span> 7. Great JavaScript / TypeScript Integration</h3>
            <ul>
                <li>MongoDB documents are <strong>natively JSON/BSON</strong> ‚Äî they map directly to JavaScript objects.
                </li>
                <li><strong>Mongoose ODM</strong> provides schemas, validation, and middleware seamlessly.</li>
                <li>No ORM impedance mismatch like MySQL + Sequelize / TypeORM.</li>
            </ul>
        </div>

        <!-- Comparison -->
        <h2 id="sec-comparison">‚öñÔ∏è When MySQL <em>Would</em> Be Better</h2>

        <div class="warning-box">
            <div class="warning-title">‚ö†Ô∏è Fair Comparison</div>
            <p style="margin:0;">For transparency, here are areas where MySQL excels:</p>
        </div>

        <table class="comparison-table">
            <thead>
                <tr>
                    <th>Feature</th>
                    <th>MySQL (SQL)</th>
                    <th>MongoDB (NoSQL)</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><strong>ACID Transactions</strong></td>
                    <td>Strong</td>
                    <td>Supported but less mature</td>
                </tr>
                <tr>
                    <td><strong>Complex JOINs</strong></td>
                    <td>Native</td>
                    <td>Requires <code>$lookup</code> (slower)</td>
                </tr>
                <tr>
                    <td><strong>Strict Data Integrity</strong></td>
                    <td>Enforced by schema</td>
                    <td>Flexible (can be a risk)</td>
                </tr>
                <tr>
                    <td><strong>Relational Data</strong></td>
                    <td>Natural fit</td>
                    <td>Requires denormalization</td>
                </tr>
            </tbody>
        </table>

        <p>For this project, the data is primarily <strong>time-series sensor data</strong> and
            <strong>document-oriented</strong>, making MongoDB the <strong>stronger choice</strong>.
        </p>

        <!-- OVERVIEW TABLE: Part 1 -->
        <h3 style="color:var(--accent); margin-bottom:16px;">4.16 NoSQL Strategy Overview</h3>
        <div style="overflow-x:auto;">
            <table class="comparison-table" style="border-top: 3px solid var(--accent);">
                <thead>
                    <tr style="background: var(--tag-bg);">
                        <th style="color: var(--accent); width: 25%;">Feature</th>
                        <th style="color: var(--accent); width: 20%;">Category</th>
                        <th style="color: var(--accent); width: 15%;">Status</th>
                        <th style="color: var(--accent);">Why / Impact</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td style="font-weight:600;">Flexible Schema</td>
                        <td>Data Model</td>
                        <td><span
                                style="background:#dcfce7; color:#166534; padding:2px 8px; border-radius:12px; font-size:11px; font-weight:700;">USED</span>
                        </td>
                        <td>Handles evolving sensor fields without migrations</td>
                    </tr>
                    <tr>
                        <td style="font-weight:600;">High Volume Writes</td>
                        <td>Performance</td>
                        <td><span
                                style="background:#dcfce7; color:#166534; padding:2px 8px; border-radius:12px; font-size:11px; font-weight:700;">USED</span>
                        </td>
                        <td>Efficient ingestion of real-time MQTT streams</td>
                    </tr>
                    <tr>
                        <td style="font-weight:600;">Geospatial Indexing</td>
                        <td>Querying</td>
                        <td><span
                                style="background:#dcfce7; color:#166534; padding:2px 8px; border-radius:12px; font-size:11px; font-weight:700;">USED</span>
                        </td>
                        <td>Native <code style="color:var(--accent); background:none; padding:0;">$geoWithin</code> for
                            cattle tracking</td>
                    </tr>
                    <tr>
                        <td style="font-weight:600;">Aggregation Pipeline</td>
                        <td>Analytics</td>
                        <td><span
                                style="background:#dcfce7; color:#166534; padding:2px 8px; border-radius:12px; font-size:11px; font-weight:700;">USED</span>
                        </td>
                        <td>Calculates health trends (Avg HR/Temp)</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- ======================================================= -->
        <!-- PART 2: OOP CONCEPTS                                     -->
        <!-- ======================================================= -->
        <div class="section-divider green-section">
            <span class="section-tag">Part 2</span>
            <h2
                style="justify-content:center; border:none; padding:0; margin:8px 0 28px; border-bottom:2px solid var(--green-accent);">
                OOP Concepts Used in the Project</h2>
        </div>

        <!-- OOP 1: Encapsulation -->
        <div class="advantage-card green-card" id="oop-encapsulation">
            <h3><span class="emoji">üîí</span> 1. Encapsulation</h3>
            <p><strong>Hiding internal details</strong> and exposing only necessary interfaces.</p>
            <p><strong>Where used:</strong></p>
            <ul>
                <li><code>MqttHandler</code> class ‚Äî <code>private client</code>, <code>private isConnected</code>,
                    <code>private latestupdate</code> fields are hidden; only <code>public</code> methods like
                    <code>publish()</code>, <code>subscribe()</code>, and <code>getLatestUpdate()</code> are exposed.
                </li>
                <li><code>CattleSensorData</code> class ‚Äî <code>private static getThresholdValue()</code> and
                    <code>private static findDistance()</code> are encapsulated; only <code>public static</code> methods
                    like <code>saftyStatus()</code>, <code>isHeartRateSafe()</code>, and
                    <code>isTemperatureSafe()</code> are accessible.
                </li>
            </ul>
            <pre><code><span class="keyword">class</span> MqttHandler {
  <span class="keyword">private static</span> instance: MqttHandler;   <span class="comment">// hidden</span>
  <span class="keyword">private</span> client: MqttClient;              <span class="comment">// hidden</span>
  <span class="keyword">private</span> isConnected = <span class="number">false</span>;             <span class="comment">// hidden</span>

  <span class="keyword">public</span> <span class="property">publish</span>(topic, message) { ... }   <span class="comment">// exposed</span>
  <span class="keyword">public</span> <span class="property">subscribe</span>(topic) { ... }          <span class="comment">// exposed</span>
}</code></pre>
        </div>

        <!-- OOP 2: Abstraction -->
        <div class="advantage-card green-card" id="oop-abstraction">
            <h3><span class="emoji">üé≠</span> 2. Abstraction</h3>
            <p><strong>Simplifying complex systems</strong> by exposing only essential features.</p>
            <p><strong>Where used:</strong></p>
            <ul>
                <li><strong>Interfaces</strong> ‚Äî <code>SensorDataInterface</code>, <code>CattleData</code>,
                    <code>UserInterface</code>, <code>GlobalContextType</code> define contracts without implementation
                    details.
                </li>
                <li><strong>Enums</strong> ‚Äî <code>ZoneStatus</code>, <code>HeartRateStatus</code>,
                    <code>TemperatureStatus</code>, <code>ZoneType</code> abstract raw string values into meaningful
                    named constants.
                </li>
                <li><strong>Mongoose Schemas</strong> ‚Äî <code>sensorDataSchema</code>, <code>cattleSchema</code>,
                    <code>userSchema</code> abstract the database layer, hiding MongoDB query complexities.
                </li>
            </ul>
            <pre><code><span class="keyword">export enum</span> ZoneStatus {
  Safe    = <span class="string">'SAFE'</span>,
  Warning = <span class="string">'WARNING'</span>,
  Danger  = <span class="string">'DANGER'</span>,
  Unknown = <span class="string">'UNKNOWN'</span>,
}

<span class="keyword">interface</span> SensorDataInterface {
  <span class="property">deviceId</span>: <span class="keyword">number</span>;
  <span class="property">heartRate</span>: <span class="keyword">number</span>;
  <span class="property">temperature</span>: <span class="keyword">number</span>;
  <span class="property">gpsLocation</span>?: { <span class="property">longitude</span>: <span class="keyword">number</span>; <span class="property">latitude</span>: <span class="keyword">number</span> };
}</code></pre>
        </div>

        <!-- OOP 3: Inheritance -->
        <div class="advantage-card green-card" id="oop-inheritance">
            <h3><span class="emoji">üß¨</span> 3. Inheritance</h3>
            <p><strong>Extending base classes / interfaces</strong> to reuse and specialize behavior.</p>
            <p><strong>Where used:</strong></p>
            <ul>
                <li><code>UserModelInterface</code> extends <code>mongoose.Model&lt;UserInterface&gt;</code> ‚Äî
                    inheriting all Mongoose model methods (find, save, delete, etc.) while adding a custom
                    <code>login()</code> method.
                </li>
                <li><code>rangeSchema</code> is reused in <code>thresholdSchema</code> ‚Äî composing schemas to inherit
                    structure across temperature and heart rate threshold sub-documents.</li>
                <li>React components inherit from base component types via JSX <code>ReactNode</code> and
                    <code>FC</code> patterns.
                </li>
            </ul>
            <pre><code><span class="keyword">interface</span> UserModelInterface <span class="keyword">extends</span> mongoose.Model&lt;UserInterface&gt; {
  <span class="property">login</span>(email: <span class="keyword">string</span>, password: <span class="keyword">string</span>): Promise&lt;UserInterface&gt;;
}</code></pre>
        </div>

        <!-- OOP 4: Polymorphism -->
        <div class="advantage-card green-card" id="oop-polymorphism">
            <h3><span class="emoji">üîÄ</span> 4. Polymorphism</h3>
            <p><strong>Same interface, different behavior</strong> depending on context.</p>
            <p><strong>Where used:</strong></p>
            <ul>
                <li><strong>Zone type handling</strong> ‚Äî <code>cattleZoneType()</code> processes both
                    <code>'safe'</code> and <code>'danger'</code> geofences via the same method, but applies different
                    distance logic per zone type.
                </li>
                <li><strong>Notification emissions</strong> ‚Äî <code>createAndEmitNotification()</code> accepts varying
                    <code>status</code> values (<code>'DANGER'</code>, <code>'WARNING'</code>) and behaves accordingly.
                </li>
                <li><strong>Route handlers</strong> ‚Äî Express routes like <code>/latest</code>,
                    <code>/withCattle</code>, <code>/latest/:cattleId</code> follow the same Request/Response contract
                    but have different implementations.
                </li>
            </ul>
        </div>

        <!-- OOP 5: Singleton -->
        <div class="advantage-card green-card" id="oop-singleton">
            <h3><span class="emoji">1Ô∏è‚É£</span> 5. Singleton Design Pattern</h3>
            <p><strong>Ensuring only one instance</strong> of a class exists throughout the application.</p>
            <p><strong>Where used:</strong></p>
            <ul>
                <li><code>MqttHandler</code> ‚Äî Uses a <code>private constructor</code> and a
                    <code>static getInstance()</code> method to guarantee a single MQTT connection is maintained
                    globally.
                </li>
                <li><code>Socket.IO instance</code> ‚Äî <code>getSocketIOInstance()</code> returns a single shared
                    Socket.IO server instance.</li>
            </ul>
            <pre><code><span class="keyword">class</span> MqttHandler {
  <span class="keyword">private static</span> instance: MqttHandler;

  <span class="keyword">private</span> <span class="property">constructor</span>() {
    <span class="keyword">this</span>.client = mqtt.connect(options);
  }

  <span class="keyword">public static</span> <span class="property">getInstance</span>(): MqttHandler {
    <span class="keyword">if</span> (!MqttHandler.instance) {
      MqttHandler.instance = <span class="keyword">new</span> MqttHandler();
    }
    <span class="keyword">return</span> MqttHandler.instance;
  }
}

<span class="comment">// Usage ‚Äî single instance exported</span>
<span class="keyword">export const</span> mqttClient = MqttHandler.<span class="property">getInstance</span>();</code></pre>
        </div>

        <!-- OOP 6: Observer -->
        <div class="advantage-card green-card" id="oop-observer">
            <h3><span class="emoji">üëÅÔ∏è</span> 6. Observer Pattern (Pub/Sub)</h3>
            <p><strong>Objects subscribe to events</strong> and are notified when changes occur.</p>
            <p><strong>Where used:</strong></p>
            <ul>
                <li><strong>MQTT Pub/Sub</strong> ‚Äî <code>MqttHandler</code> subscribes to topics and reacts on
                    <code>client.on('message', ...)</code> ‚Äî classic publish/subscribe.
                </li>
                <li><strong>Socket.IO</strong> ‚Äî The server emits events like <code>'sensor_data'</code>,
                    <code>'sensor_data_updated'</code>, <code>'new_notification'</code> and frontend clients listen and
                    react to them in real-time.
                </li>
                <li><strong>React useEffect</strong> ‚Äî Components observe state changes and run side effects (e.g.,
                    <code>ContextWrapper</code> saves auth to localStorage when <code>auth</code> state changes).
                </li>
            </ul>
            <pre><code><span class="comment">// MQTT ‚Äî Observer subscribes to messages</span>
<span class="keyword">this</span>.client.<span class="property">on</span>(<span class="string">'message'</span>, <span class="keyword">async</span> (topic, message) => {
  <span class="comment">// react to incoming sensor data</span>
});

<span class="comment">// Socket.IO ‚Äî Observer emits to listeners</span>
io.<span class="property">emit</span>(<span class="string">'new_notification'</span>, notification);</code></pre>
        </div>

        <!-- OOP 7: MVC -->
        <div class="advantage-card green-card" id="oop-mvc">
            <h3><span class="emoji">üèóÔ∏è</span> 7. MVC (Model-View-Controller) Architecture</h3>
            <p><strong>Separating data, presentation, and control logic</strong> for cleaner code.</p>
            <p><strong>Project structure follows MVC:</strong></p>
            <table class="comparison-table" style="margin-top:12px;">
                <thead>
                    <tr>
                        <th>Layer</th>
                        <th>Files</th>
                        <th>Responsibility</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>Model</strong></td>
                        <td><code>model/</code> ‚Äî cattle.ts, sensorData.ts, UserModel.ts, geoFenceModel.ts, etc.</td>
                        <td>Data structure & database interaction</td>
                    </tr>
                    <tr>
                        <td><strong>View</strong></td>
                        <td><code>cms-frontend/src/components/</code> ‚Äî React components (40+ files)</td>
                        <td>User interface & presentation</td>
                    </tr>
                    <tr>
                        <td><strong>Controller</strong></td>
                        <td><code>controller/</code> ‚Äî authController.ts, geoFenceController.ts, mapController.ts, etc.
                        </td>
                        <td>Business logic & request handling</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- OOP 8: Provider Pattern -->
        <div class="advantage-card green-card" id="oop-provider">
            <h3><span class="emoji">üîó</span> 8. Provider Pattern (React Context)</h3>
            <p><strong>Sharing state globally</strong> without prop drilling through component trees.</p>
            <p><strong>Where used:</strong></p>
            <ul>
                <li><code>GlobalContext.tsx</code> ‚Äî Defines typed context with <code>GlobalContextType</code> interface
                    for auth state, UI toggles, and menu selection.</li>
                <li><code>ContextWrapper.tsx</code> ‚Äî Wraps the entire app with <code>GlobalContext.Provider</code>,
                    managing state and persistence.</li>
                <li><code>NotificationContext.tsx</code> ‚Äî Separate context specifically for real-time notification
                    state management.</li>
            </ul>
            <pre><code><span class="comment">// Provider wraps children with shared state</span>
<span class="keyword">const</span> ContextWrapper = ({ children }) => {
  <span class="keyword">const</span> [auth, setAuth] = useState&lt;AuthType&gt;(...);

  <span class="keyword">return</span> (
    &lt;GlobalContext.<span class="property">Provider</span> value={{ auth, setAuth, ... }}&gt;
      {children}
    &lt;/GlobalContext.<span class="property">Provider</span>&gt;
  );
};</code></pre>
        </div>

        <!-- OOP 9: Separation of Concerns -->
        <div class="advantage-card green-card" id="oop-soc">
            <h3><span class="emoji">üìê</span> 9. Separation of Concerns</h3>
            <p><strong>Each module handles a single responsibility</strong>, making the codebase maintainable.</p>
            <ul>
                <li><strong>Services Layer</strong> ‚Äî <code>controls.ts</code> handles all sensor analysis logic (safety
                    checks, geofencing, notifications). <code>mqttClient.ts</code> handles only MQTT connections and
                    message processing.</li>
                <li><strong>Routes Layer</strong> ‚Äî <code>sensorDataRoutes.ts</code>, <code>authRoutes.ts</code>,
                    <code>notificationRoutes.ts</code> each handle their own API endpoints.
                </li>
                <li><strong>Custom Hooks</strong> ‚Äî <code>UseAxiosPrivate.tsx</code> encapsulates authenticated HTTP
                    logic. <code>useRefreshToken.tsx</code> encapsulates token refresh logic.</li>
                <li><strong>Frontend Services</strong> ‚Äî <code>AuthServices.tsx</code>,
                    <code>CattleListService.tsx</code>, <code>Axios.tsx</code> separate API logic from UI components.
                </li>
                <li><strong>Middleware</strong> ‚Äî Authentication and authorization logic isolated in the
                    <code>middlewear/</code> folder.
                </li>
            </ul>
        </div>

        <!-- OVERVIEW TABLE: Part 2 -->
        <h3 style="color:var(--green-accent); margin-bottom:16px;">4.16 OOP Concepts Overview</h3>
        <div style="overflow-x:auto;">
            <table class="comparison-table" style="border-top: 3px solid var(--green-accent);">
                <thead>
                    <tr style="background: var(--green-light);">
                        <th style="color: var(--green-tag); width: 25%;">Concept</th>
                        <th style="color: var(--green-tag); width: 20%;">Type</th>
                        <th style="color: var(--green-tag); width: 15%;">Status</th>
                        <th style="color: var(--green-tag);">Where / Why</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td style="font-weight:600;">Singleton Pattern</td>
                        <td>Creational</td>
                        <td><span
                                style="background:#dcfce7; color:#166534; padding:2px 8px; border-radius:12px; font-size:11px; font-weight:700;">USED</span>
                        </td>
                        <td>Global <code>MqttHandler</code> & DB Connection</td>
                    </tr>
                    <tr>
                        <td style="font-weight:600;">Observer Pattern</td>
                        <td>Behavioral</td>
                        <td><span
                                style="background:#dcfce7; color:#166534; padding:2px 8px; border-radius:12px; font-size:11px; font-weight:700;">USED</span>
                        </td>
                        <td>Real-time updates via Socket.IO events</td>
                    </tr>
                    <tr>
                        <td style="font-weight:600;">MVC Architecture</td>
                        <td>Architectural</td>
                        <td><span
                                style="background:#dcfce7; color:#166534; padding:2px 8px; border-radius:12px; font-size:11px; font-weight:700;">USED</span>
                        </td>
                        <td>Controller ‚Üí Service ‚Üí Model separation</td>
                    </tr>
                    <tr>
                        <td style="font-weight:600;">Encapsulation</td>
                        <td>Core OOP</td>
                        <td><span
                                style="background:#dcfce7; color:#166534; padding:2px 8px; border-radius:12px; font-size:11px; font-weight:700;">USED</span>
                        </td>
                        <td>Private class members (e.g., <code>private client</code> in MqttHandler)</td>
                    </tr>
                    <tr>
                        <td style="font-weight:600;">Polymorphism</td>
                        <td>Core OOP</td>
                        <td><span
                                style="background:#dcfce7; color:#166534; padding:2px 8px; border-radius:12px; font-size:11px; font-weight:700;">USED</span>
                        </td>
                        <td>Common interfaces for varying Zone Types</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- ======================================================= -->
        <!-- PART 3: DESIGN PRINCIPLES (SOLID + OTHERS)             -->
        <!-- ======================================================= -->
        <div class="section-divider orange-section">
            <span class="section-tag">Part 3</span>
            <h2
                style="justify-content:center; border:none; padding:0; margin:8px 0 28px; border-bottom:2px solid var(--orange-accent);">
                SOLID & Design Principles</h2>
        </div>

        <!-- ==================== SOLID PRINCIPLES ==================== -->

        <!-- SOLID 1: SRP -->
        <div class="advantage-card orange-card" id="solid-srp">
            <h3><span class="emoji">üÖ¢</span> SRP ‚Äî Single Responsibility Principle</h3>
            <p><strong>Definition:</strong> A class should have only one reason to change.</p>
            <p><strong>Where used:</strong></p>
            <ul>
                <li><code>MqttHandler</code> class ‚Äî Only handles MQTT connection, publishing, and subscribing (lines
                    1-180). It does NOT process sensor data; that's delegated to <code>CattleSensorData</code>.</li>
                <li><code>CattleSensorData</code> class ‚Äî Only performs sensor safety checks (heart rate, temperature,
                    geofencing). It does NOT store data or handle HTTP requests.</li>
                <li><strong>Auth controllers</strong> ‚Äî <code>authController.ts</code> handles auth logic (login,
                    logout,
                    user management). <code>refreshTokenController.ts</code> only handles token refresh.</li>
                <li><strong>Frontend hooks</strong> ‚Äî <code>useRefreshToken</code> only refreshes tokens,
                    <code>UseAxiosPrivate</code> only attaches tokens to axios. Both have a single responsibility.
                </li>
            </ul>
            <pre><code><span class="comment">// Each class has ONE reason to change</span>
<span class="keyword">class</span> MqttHandler {
  <span class="comment">// Only handles MQTT connection ‚Äî NOT data processing</span>
  <span class="property">publish</span>(topic, message) { ... }
  <span class="property">subscribe</span>(topic) { ... }
}

<span class="keyword">class</span> CattleSensorData {
  <span class="comment">// Only performs data analysis ‚Äî NOT connection management</span>
  <span class="keyword">static</span> <span class="property">saftyStatus</span>(data) { ... }
  <span class="keyword">static</span> <span class="property">isHeartRateSafe</span>(data) { ... }
}</code></pre>
        </div>

        <!-- SOLID 2: OCP -->
        <div class="advantage-card orange-card" id="solid-ocp">
            <h3><span class="emoji">üÖû</span> OCP ‚Äî Open/Closed Principle</h3>
            <p><strong>Definition:</strong> Software entities should be open for extension, but closed for modification.
            </p>
            <p><strong>Where used:</strong></p>
            <ul>
                <li><strong>Express middleware pipeline</strong> ‚Äî You can add new middleware functions (e.g.,
                    <code>requireAdmin</code>, <code>verifyJWT</code>, logging middleware) WITHOUT modifying existing
                    middleware code.
                </li>
                <li><strong>Mongoose schema extensions</strong> ‚Äî <code>cattleSchema</code> can be extended with new
                    fields (e.g., <code>breed</code>, <code>age</code>, <code>healthHistory</code>) without changing the
                    core model structure.</li>
                <li><strong>Zone type calculations</strong> ‚Äî <code>ZoneType</code> enum and
                    <code>cattleZoneType()</code> method support <code>'safe'</code>, <code>'danger'</code>, and in the
                    future could support <code>'warning'</code> or <code>'quarantine'</code> zones without modifying
                    existing logic.
                </li>
                <li><strong>React component composition</strong> ‚Äî Components like <code>CattleTable</code> accept
                    children and props, allowing new UI features to extend without editing core component code.</li>
            </ul>
            <pre><code><span class="comment">// Middleware stack is OPEN for extension via adding new middleware</span>
router.<span class="property">get</span>(<span class="string">'/'</span>, 
  verifyJWT,             <span class="comment">// Extension 1: auth check</span>
  requireAdmin,          <span class="comment">// Extension 2: role check</span>
  getUserDetails         <span class="comment">// Final handler ‚Äî CLOSED for modification</span>
);</code></pre>
        </div>

        <!-- SOLID 3: LSP -->
        <div class="advantage-card orange-card" id="solid-lsp">
            <h3><span class="emoji">üÖõ</span> LSP ‚Äî Liskov Substitution Principle</h3>
            <p><strong>Definition:</strong> Objects of a superclass should be replaceable with objects of a subclass
                without breaking the application.</p>
            <p><strong>Where used:</strong></p>
            <ul>
                <li><strong>Mongoose models</strong> ‚Äî <code>UserModelInterface</code> extends
                    <code>mongoose.Model</code>. Any code expecting a <code>mongoose.Model</code> can accept a
                    <code>UserModel</code> instance without issues.
                </li>
                <li><strong>React component hierarchy</strong> ‚Äî All components return <code>JSX.Element</code> or
                    <code>ReactNode</code>. Any parent component can render any child component without knowing its
                    internal details.
                </li>
                <li><strong>Axios instances</strong> ‚Äî <code>axios.create()</code> returns an axios instance that
                    behaves like the default axios object but with custom config. Can be used interchangeably.</li>
                <li><strong>TypeScript interfaces</strong> ‚Äî <code>SensorDataInterface</code> defines a contract. Any
                    object following this interface can substitute for another without breaking type safety.</li>
            </ul>
            <pre><code><span class="keyword">interface</span> UserModelInterface <span class="keyword">extends</span> mongoose.Model&lt;UserInterface&gt; {
  <span class="property">login</span>(email: <span class="keyword">string</span>, password: <span class="keyword">string</span>): Promise&lt;UserInterface&gt;;
}

<span class="comment">// UserModel can substitute for mongoose.Model anywhere</span>
<span class="keyword">const</span> model: mongoose.Model = UserModel;  <span class="comment">// ‚úì Valid substitution</span></code></pre>
        </div>

        <!-- SOLID 4: ISP -->
        <div class="advantage-card orange-card" id="solid-isp">
            <h3><span class="emoji">üÖò</span> ISP ‚Äî Interface Segregation Principle</h3>
            <p><strong>Definition:</strong> Clients should not be forced to depend on interfaces they don't use.</p>
            <p><strong>Where used:</strong></p>
            <ul>
                <li><strong>Granular interfaces</strong> ‚Äî <code>SensorDataInterface</code>,
                    <code>UserInterface</code>, <code>CattleData</code>, <code>ThresholdInterface</code> are all
                    separate. Components use ONLY the interfaces they need.
                </li>
                <li><strong>Context separation</strong> ‚Äî <code>GlobalContext</code> and
                    <code>NotificationContext</code> are separate. Components needing auth use GlobalContext, components
                    needing notifications use NotificationContext ‚Äî no forced dependencies.
                </li>
                <li><strong>Route-specific controllers</strong> ‚Äî <code>authController</code>,
                    <code>cattleController</code>, <code>sensorDataController</code> are separate. Each route only
                    imports what it needs.
                </li>
                <li><strong>Status enums</strong> ‚Äî Separate enums for <code>ZoneStatus</code>,
                    <code>HeartRateStatus</code>, <code>TemperatureStatus</code> instead of one giant enum. Each domain
                    uses only relevant statuses.
                </li>
            </ul>
            <pre><code><span class="comment">// ‚ùå BAD: Single bloated interface</span>
<span class="keyword">interface</span> EverythingInterface {
  auth, cattle, sensor, map, notifications ...
}

<span class="comment">// ‚úì GOOD: Segregated interfaces (project approach)</span>
<span class="keyword">interface</span> AuthType { username, role, accessToken }
<span class="keyword">interface</span> CattleData { cattleId, deviceId, name }
<span class="keyword">interface</span> SensorDataInterface { deviceId, heartRate, temperature }</code></pre>
        </div>

        <!-- SOLID 5: DIP -->
        <div class="advantage-card orange-card" id="solid-dip">
            <h3><span class="emoji">üÖì</span> DIP ‚Äî Dependency Inversion Principle</h3>
            <p><strong>Definition:</strong> High-level modules should not depend on low-level modules. Both should
                depend on abstractions.</p>
            <p><strong>Where used:</strong></p>
            <ul>
                <li><strong>Mongoose models as abstractions</strong> ‚Äî Route controllers depend on the
                    <code>cattleSchema</code> and <code>sensorDataSchema</code> abstractions, NOT raw MongoDB queries.
                </li>
                <li><strong>Axios abstraction</strong> ‚Äî Components use <code>UseAxiosPrivate</code> hook, NOT raw
                    fetch calls. They depend on the abstraction, not the underlying HTTP implementation.</li>
                <li><strong>MQTT abstraction</strong> ‚Äî Backend routes depend on <code>MqttHandler</code> class, NOT
                    raw <code>mqtt.connect()</code> calls. They work with the singleton instance interface.</li>
                <li><strong>Context providers</strong> ‚Äî Components depend on <code>GlobalContext</code> and
                    <code>NotificationContext</code> interfaces, NOT localStorage or raw state logic.
                </li>
                <li><strong>Middleware abstractions</strong> ‚Äî Routes depend on <code>verifyJWT</code> and
                    <code>requireAdmin</code> interfaces, NOT raw JWT verification code.
                </li>
            </ul>
            <pre><code><span class="comment">// High-level route depends on abstraction (Mongoose model)</span>
router.<span class="property">get</span>(<span class="string">'/'</span>, <span class="keyword">async</span> (req, res) =&gt; {
  <span class="keyword">const</span> cattle = <span class="keyword">await</span> Cattle.<span class="property">find</span>();  <span class="comment">// ‚Üê Abstraction (NOT raw DB query)</span>
  res.json(cattle);
});

<span class="comment">// NOT using raw MongoDB client ‚Äî depends on Mongoose abstraction</span></code></pre>
        </div>

        <!-- ==================== OTHER DESIGN PRINCIPLES ==================== -->

        <!-- PRINCIPLE 6: DRY -->
        <div class="advantage-card orange-card" id="prin-dry">
            <h3><span class="emoji">üîÅ</span> DRY ‚Äî Don't Repeat Yourself</h3>
            <p><strong>Definition:</strong> Every piece of knowledge should have a single, unambiguous representation.
            </p>
            <p><strong>Where used:</strong></p>
            <ul>
                <li><strong>Shared utility classes</strong> ‚Äî <code>CattleSensorData</code> class provides reusable
                    methods like <code>saftyStatus()</code>, <code>isHeartRateSafe()</code>,
                    <code>isTemperatureSafe()</code>, <code>cattleZoneType()</code> used across multiple routes.
                </li>
                <li><strong>Reusable React hooks</strong> ‚Äî <code>useRefreshToken</code>,
                    <code>UseAxiosPrivate</code>, <code>UseLogout</code> encapsulate common patterns to avoid
                    duplicating auth logic in every component.
                </li>
                <li><strong>Mongoose schema reuse</strong> ‚Äî <code>rangeSchema</code> is defined once and reused in
                    <code>thresholdSchema</code> for both temperature and heart rate ranges.
                </li>
                <li><strong>Centralized API logic</strong> ‚Äî <code>AuthServices.tsx</code>,
                    <code>CattleListService.tsx</code>, <code>Axios.tsx</code> centralize API calls instead of
                    duplicating fetch logic in each component.
                </li>
                <li><strong>Middleware functions</strong> ‚Äî <code>verifyJWT</code> and <code>requireAdmin</code> are
                    defined once and reused across all protected routes.</li>
            </ul>
            <pre><code><span class="comment">// ‚úì Reusable helper (DRY principle)</span>
<span class="keyword">class</span> CattleSensorData {
  <span class="keyword">static</span> <span class="property">isHeartRateSafe</span>(data: SensorDataInterface) {
    <span class="comment">// Single source of truth for heart rate validation</span>
  }
}

<span class="comment">// Used in multiple places</span>
<span class="keyword">const</span> isSafe1 = CattleSensorData.<span class="property">isHeartRateSafe</span>(data1);
<span class="keyword">const</span> isSafe2 = CattleSensorData.<span class="property">isHeartRateSafe</span>(data2);</code></pre>
        </div>

        <!-- PRINCIPLE 7: KISS -->
        <div class="advantage-card orange-card" id="prin-kiss">
            <h3><span class="emoji">üíã</span> KISS ‚Äî Keep It Simple, Stupid</h3>
            <p><strong>Definition:</strong> Most systems work best if they are kept simple rather than made complex.
            </p>
            <p><strong>Where used:</strong></p>
            <ul>
                <li><strong>Clear route structure</strong> ‚Äî Routes are straightforward and RESTful:
                    <code>GET /cattle</code>, <code>POST /cattle</code>, <code>PUT /cattle/:id</code>,
                    <code>DELETE /cattle/:id</code>. No unnecessary complexity.
                </li>
                <li><strong>Simple status enums</strong> ‚Äî <code>ZoneStatus</code>, <code>HeartRateStatus</code>,
                    <code>TemperatureStatus</code> use plain string enums instead of complex state machines.
                </li>
                <li><strong>Direct state management</strong> ‚Äî React <code>useState</code> and <code>useContext</code>
                    for simple state. Redux/MobX not needed (avoiding over-engineering).</li>
                <li><strong>Flat folder structure</strong> ‚Äî Backend has clean separation:
                    <code>routes/</code>, <code>controller/</code>, <code>model/</code>, <code>services/</code>,
                    <code>middlewear/</code> ‚Äî easy to navigate.
                </li>
                <li><strong>Straightforward validation</strong> ‚Äî Threshold checks use simple comparison operators
                    (<code>&lt;</code>, <code>&gt;</code>) instead of complex validation libraries where not needed.
                </li>
            </ul>
            <pre><code><span class="comment">// ‚úì Simple and clear (KISS)</span>
<span class="keyword">static</span> <span class="property">isHeartRateSafe</span>(data: SensorDataInterface) {
  <span class="keyword">const</span> threshold = <span class="keyword">await</span> <span class="keyword">this</span>.<span class="property">getThresholdValue</span>();
  <span class="keyword">return</span> data.heartRate &gt;= threshold.min &amp;&amp; data.heartRate &lt;= threshold.max;
}

<span class="comment">// Simple logic ‚Äî easy to understand and maintain</span></code></pre>
        </div>

        <!-- PRINCIPLE 8: Composition over Inheritance -->
        <div class="advantage-card orange-card" id="prin-composition">
            <h3><span class="emoji">üß©</span> Composition over Inheritance</h3>
            <p><strong>Definition:</strong> Favor object composition (HAS-A) over class inheritance (IS-A).</p>
            <p><strong>Where used:</strong></p>
            <ul>
                <li><strong>React component composition</strong> ‚Äî Components like <code>Dashboard</code> compose
                    smaller components (<code>CattleTable</code>, <code>MapView</code>, <code>NotificationPanel</code>)
                    instead of inheriting from a base dashboard class.</li>
                <li><strong>Schema composition</strong> ‚Äî <code>cattleSchema</code> embeds <code>deviceId</code> and
                    <code>cattleId</code> fields (HAS-A relationship) instead of extending a base schema.
                </li>
                <li><strong>Service composition</strong> ‚Äî <code>mqttClient</code> and <code>CattleSensorData</code>
                    are used via composition in routes and controllers, NOT via class inheritance chains.</li>
                <li><strong>Hook composition</strong> ‚Äî <code>UseAxiosPrivate</code> composes
                    <code>useRefreshToken</code> and <code>useContext</code> hooks instead of creating a hook class
                    hierarchy.
                </li>
                <li><strong>Middleware composition</strong> ‚Äî Express middleware functions are composed in a pipeline
                    (<code>verifyJWT</code> + <code>requireAdmin</code>) instead of creating middleware class
                    hierarchies.
                </li>
            </ul>
            <pre><code><span class="comment">// ‚úì Composition (project approach)</span>
<span class="keyword">const</span> Dashboard = () =&gt; {
  <span class="keyword">return</span> (
    &lt;div&gt;
      &lt;CattleTable /&gt;      {<span class="comment">/* Composed */</span>}
      &lt;MapView /&gt;          {<span class="comment">/* Composed */</span>}
      &lt;NotificationPanel /&gt;{<span class="comment">/* Composed */</span>}
    &lt;/div&gt;
  );
};

<span class="comment">// NOT using inheritance ‚Äî using composition</span></code></pre>
        </div>

        <!-- PRINCIPLE 9: Middleware Pipeline -->
        <div class="advantage-card orange-card" id="prin-middleware">
            <h3><span class="emoji">üîó</span> Middleware Pipeline Pattern</h3>
            <p><strong>Definition:</strong> Process requests through a chain of processing units (middleware), each
                handling a specific concern.</p>
            <p><strong>Where used:</strong></p>
            <ul>
                <li><strong>Express middleware pipeline</strong> ‚Äî Requests flow through
                    <code>credentials</code> ‚Üí <code>cookieParser</code> ‚Üí <code>cors</code> ‚Üí <code>json parser</code>
                    ‚Üí <code>verifyJWT</code> ‚Üí <code>requireAdmin</code> ‚Üí route handler.
                </li>
                <li><strong>Axios interceptors</strong> ‚Äî <code>UseAxiosPrivate</code> attaches request interceptors
                    (add auth header) and response interceptors (handle 403 errors, refresh token) in a pipeline.</li>
                <li><strong>React effect chains</strong> ‚Äî <code>useEffect</code> hooks run in sequence, creating a
                    pipeline of side effects (data fetching ‚Üí state update ‚Üí re-render).</li>
                <li><strong>MQTT message processing</strong> ‚Äî Incoming MQTT messages flow through: receive ‚Üí parse ‚Üí
                    validate ‚Üí process ‚Üí store ‚Üí emit Socket.IO event.</li>
            </ul>
            <pre><code><span class="comment">// Express middleware pipeline</span>
router.<span class="property">get</span>(<span class="string">'/admin-only'</span>,
  verifyJWT,          <span class="comment">// Step 1: Verify JWT token</span>
  requireAdmin,       <span class="comment">// Step 2: Check admin role</span>
  getAdminData        <span class="comment">// Step 3: Execute handler</span>
);

<span class="comment">// Each middleware has a single concern (SoC + Pipeline)</span></code></pre>
        </div>

        <!-- OVERVIEW TABLE: Part 3 -->
        <h3 style="color:var(--orange-accent); margin-bottom:16px;">4.16 Design Principles Overview</h3>
        <div style="overflow-x:auto;">
            <table class="comparison-table" style="border-top: 3px solid var(--orange-accent);">
                <thead>
                    <tr style="background: var(--orange-light);">
                        <th style="color: var(--orange-tag); width: 25%;">Principle</th>
                        <th style="color: var(--orange-tag); width: 20%;">Category</th>
                        <th style="color: var(--orange-tag); width: 15%;">Status</th>
                        <th style="color: var(--orange-tag);">Where / Why</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td style="font-weight:600;">SRP (Single Responsibility)</td>
                        <td>SOLID</td>
                        <td><span
                                style="background:#dcfce7; color:#166534; padding:2px 8px; border-radius:12px; font-size:11px; font-weight:700;">USED</span>
                        </td>
                        <td>Classes like <code>CattleSensorData</code> handle logic only</td>
                    </tr>
                    <tr>
                        <td style="font-weight:600;">OCP (Open/Closed)</td>
                        <td>SOLID</td>
                        <td><span
                                style="background:#dcfce7; color:#166534; padding:2px 8px; border-radius:12px; font-size:11px; font-weight:700;">USED</span>
                        </td>
                        <td>Middleware pipeline allows extension without modifying core</td>
                    </tr>
                    <tr>
                        <td style="font-weight:600;">LSP (Liskov Substitution)</td>
                        <td>SOLID</td>
                        <td><span
                                style="background:#dcfce7; color:#166534; padding:2px 8px; border-radius:12px; font-size:11px; font-weight:700;">USED</span>
                        </td>
                        <td>Model interfaces extend generic Mongoose types</td>
                    </tr>
                    <tr>
                        <td style="font-weight:600;">DRY (Don't Repeat Yourself)</td>
                        <td>General</td>
                        <td><span
                                style="background:#dcfce7; color:#166534; padding:2px 8px; border-radius:12px; font-size:11px; font-weight:700;">USED</span>
                        </td>
                        <td>Common logic in <code>utils/</code> and Hooks</td>
                    </tr>
                    <tr>
                        <td style="font-weight:600;">Middleware Pattern</td>
                        <td>Architectural</td>
                        <td><span
                                style="background:#dcfce7; color:#166534; padding:2px 8px; border-radius:12px; font-size:11px; font-weight:700;">USED</span>
                        </td>
                        <td>Sequential request processing (Auth ‚Üí Validation ‚Üí Route)</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- ======================================================= -->
        <!-- PART 4: DESIGN PATTERNS                                -->
        <!-- ======================================================= -->
        <div class="section-divider purple-section">
            <span class="section-tag">Part 4</span>
            <h2
                style="justify-content:center; border:none; padding:0; margin:8px 0 28px; border-bottom:2px solid var(--purple-accent);">
                Design Patterns in the Project</h2>
        </div>

        <p style="font-size: 15px; color: var(--text-secondary); margin-bottom: 32px;">
            This section documents the <strong>7 design patterns currently used</strong> in the codebase and
            <strong>7 recommended patterns</strong> that could enhance the system in the future.
        </p>

        <!-- ==================== CURRENTLY USED PATTERNS ==================== -->

        <h2 style="color: var(--purple-accent); border-bottom-color: var(--purple-accent);">‚úÖ Currently Used Patterns
            (7)</h2>

        <!-- PATTERN 1: Singleton -->
        <div class="advantage-card purple-card" id="pat-singleton">
            <h3><span class="emoji">1Ô∏è‚É£</span> Singleton Pattern</h3>
            <p><strong>Purpose:</strong> Ensure only one instance of a class exists throughout the application.</p>
            <p><strong>Where used:</strong></p>
            <ul>
                <li><code>MqttHandler.getInstance()</code> ‚Äî Ensures a single MQTT connection across the entire backend
                </li>
                <li><code>getSocketIOInstance()</code> ‚Äî Single Socket.IO server instance for real-time communication
                </li>
                <li>Mongoose database connection ‚Äî Single connection pool managed globally</li>
            </ul>
            <pre><code><span class="comment">// MqttHandler singleton implementation</span>
<span class="keyword">class</span> MqttHandler {
  <span class="keyword">private static</span> instance: MqttHandler;
  <span class="keyword">private</span> client: MqttClient;

  <span class="keyword">private</span> <span class="property">constructor</span>() {
    <span class="keyword">this</span>.client = mqtt.<span class="property">connect</span>(MQTT_CONFIG);
  }

  <span class="keyword">public static</span> <span class="property">getInstance</span>(): MqttHandler {
    <span class="keyword">if</span> (!MqttHandler.instance) {
      MqttHandler.instance = <span class="keyword">new</span> MqttHandler();
    }
    <span class="keyword">return</span> MqttHandler.instance;
  }
}

<span class="keyword">export const</span> mqttClient = MqttHandler.<span class="property">getInstance</span>();</code></pre>
            <p><strong>Benefits:</strong> Prevents multiple connections, saves resources, provides global access point.
            </p>
        </div>

        <!-- PATTERN 2: Observer (Pub/Sub) -->
        <div class="advantage-card purple-card" id="pat-observer">
            <h3><span class="emoji">üëÅÔ∏è</span> Observer Pattern (Pub/Sub)</h3>
            <p><strong>Purpose:</strong> Define a one-to-many dependency where state changes notify all dependents.</p>
            <p><strong>Where used:</strong></p>
            <ul>
                <li><strong>MQTT pub/sub</strong> ‚Äî Backend subscribes to <code>sensor/data</code> topic, reacts when
                    messages arrive</li>
                <li><strong>Socket.IO events</strong> ‚Äî Server emits <code>'sensor_data_updated'</code>,
                    <code>'new_notification'</code>; frontend listens
                </li>
                <li><strong>React useEffect</strong> ‚Äî Components observe state changes (e.g., auth state) and react
                </li>
                <li><strong>Event emitters</strong> ‚Äî Node.js EventEmitter pattern in MQTT message handling</li>
            </ul>
            <pre><code><span class="comment">// MQTT Observer (backend subscribes and reacts)</span>
mqttClient.<span class="property">subscribe</span>(<span class="string">'sensor/data'</span>);
mqttClient.client.<span class="property">on</span>(<span class="string">'message'</span>, <span class="keyword">async</span> (topic, message) => {
  <span class="keyword">const</span> data = JSON.<span class="property">parse</span>(message.<span class="property">toString</span>());
  <span class="comment">// Process and notify observers (Socket.IO clients)</span>
  io.<span class="property">emit</span>(<span class="string">'sensor_data_updated'</span>, data);
});

<span class="comment">// Frontend Observer (listens for updates)</span>
socket.<span class="property">on</span>(<span class="string">'sensor_data_updated'</span>, (data) => {
  setSensorData(data);  <span class="comment">// React to change</span>
});</code></pre>
            <p><strong>Benefits:</strong> Loose coupling, real-time updates, scalable event-driven architecture.</p>
        </div>

        <!-- PATTERN 3: Factory -->
        <div class="advantage-card purple-card" id="pat-factory">
            <h3><span class="emoji">üè≠</span> Factory Pattern</h3>
            <p><strong>Purpose:</strong> Delegate object creation to factory methods instead of direct instantiation.
            </p>
            <p><strong>Where used:</strong></p>
            <ul>
                <li><code>mongoose.model('Cattle', cattleSchema)</code> ‚Äî Factory creates model instances</li>
                <li><code>axios.create(config)</code> ‚Äî Creates configured axios instances (e.g.,
                    <code>UseAxiosPrivate</code>)
                </li>
                <li><code>React.createElement()</code> ‚Äî JSX uses factory pattern under the hood</li>
                <li>Notification creation functions ‚Äî Factory methods create different notification types</li>
            </ul>
            <pre><code><span class="comment">// Mongoose Factory Pattern</span>
<span class="keyword">const</span> Cattle = mongoose.<span class="property">model</span>(<span class="string">'Cattle'</span>, cattleSchema);
<span class="keyword">const</span> newCattle = <span class="keyword">new</span> Cattle({ cattleId, name, deviceId });

<span class="comment">// Axios Factory Pattern</span>
<span class="keyword">const</span> axiosPrivate = axios.<span class="property">create</span>({
  baseURL: API_URL,
  headers: { <span class="string">'Content-Type'</span>: <span class="string">'application/json'</span> },
  withCredentials: <span class="keyword">true</span>
});</code></pre>
            <p><strong>Benefits:</strong> Encapsulates creation logic, provides consistent object initialization, easier
                to extend.</p>
        </div>

        <!-- PATTERN 4: Repository -->
        <div class="advantage-card purple-card" id="pat-repository">
            <h3><span class="emoji">üóÑÔ∏è</span> Repository Pattern</h3>
            <p><strong>Purpose:</strong> Abstract data access logic into a separate layer.</p>
            <p><strong>Where used:</strong></p>
            <ul>
                <li><strong>Mongoose models</strong> ‚Äî <code>Cattle</code>, <code>sensorData</code>, <code>User</code>,
                    <code>geoFence</code>, <code>threshold</code> act as repositories
                </li>
                <li>Controllers use models (repositories) instead of raw database queries</li>
                <li>Provides methods like <code>find()</code>, <code>findById()</code>, <code>create()</code>,
                    <code>updateOne()</code>, <code>deleteOne()</code>
                </li>
            </ul>
            <pre><code><span class="comment">// Repository Pattern via Mongoose</span>
<span class="keyword">import</span> Cattle <span class="keyword">from</span> <span class="string">'../model/cattle'</span>;  <span class="comment">// Repository</span>

<span class="comment">// Controller uses repository methods (NOT raw MongoDB)</span>
router.<span class="property">get</span>(<span class="string">'/'</span>, <span class="keyword">async</span> (req, res) => {
  <span class="keyword">const</span> cattle = <span class="keyword">await</span> Cattle.<span class="property">find</span>();  <span class="comment">// Repository method</span>
  res.<span class="property">json</span>(cattle);
});

router.<span class="property">post</span>(<span class="string">'/'</span>, <span class="keyword">async</span> (req, res) => {
  <span class="keyword">const</span> newCattle = <span class="keyword">await</span> Cattle.<span class="property">create</span>(req.body);  <span class="comment">// Repository method</span>
  res.<span class="property">status</span>(<span class="number">201</span>).<span class="property">json</span>(newCattle);
});</code></pre>
            <p><strong>Benefits:</strong> Decouples business logic from data access, easier to test, swappable data
                sources.</p>
        </div>

        <!-- PATTERN 5: Chain of Responsibility -->
        <div class="advantage-card purple-card" id="pat-chain">
            <h3><span class="emoji">‚õìÔ∏è</span> Chain of Responsibility</h3>
            <p><strong>Purpose:</strong> Pass requests through a chain of handlers, each deciding to process or pass
                along.</p>
            <p><strong>Where used:</strong></p>
            <ul>
                <li><strong>Express middleware chain</strong> ‚Äî Requests pass through: <code>cors</code> ‚Üí
                    <code>cookieParser</code> ‚Üí <code>json parser</code> ‚Üí <code>verifyJWT</code> ‚Üí
                    <code>requireAdmin</code> ‚Üí route handler
                </li>
                <li>Each middleware decides to process (e.g., parse cookies) or pass to next via <code>next()</code>
                </li>
                <li>Can short-circuit chain (e.g., <code>verifyJWT</code> returns 401 if token invalid)</li>
            </ul>
            <pre><code><span class="comment">// Chain of Responsibility via Express Middleware</span>
app.<span class="property">use</span>(credentials);        <span class="comment">// Handler 1: CORS credentials</span>
app.<span class="property">use</span>(cookieParser());     <span class="comment">// Handler 2: Parse cookies</span>
app.<span class="property">use</span>(express.<span class="property">json</span>());    <span class="comment">// Handler 3: Parse JSON body</span>

router.<span class="property">get</span>(<span class="string">'/protected'</span>,
  verifyJWT,               <span class="comment">// Handler 4: Verify token</span>
  requireAdmin,            <span class="comment">// Handler 5: Check role</span>
  getProtectedData         <span class="comment">// Final handler</span>
);

<span class="comment">// Each handler calls next() to continue chain or stops chain</span></code></pre>
            <p><strong>Benefits:</strong> Decouples senders and receivers, flexible handler ordering, easy to add/remove
                handlers.</p>
        </div>

        <!-- PATTERN 6: Decorator -->
        <div class="advantage-card purple-card" id="pat-decorator">
            <h3><span class="emoji">üé®</span> Decorator Pattern</h3>
            <p><strong>Purpose:</strong> Add behavior to objects dynamically without modifying their structure.</p>
            <p><strong>Where used:</strong></p>
            <ul>
                <li><strong>Axios interceptors</strong> ‚Äî Decorate axios instance with auth header injection and error
                    handling</li>
                <li><strong>Middleware functions</strong> ‚Äî <code>verifyJWT</code>, <code>requireAdmin</code> decorate
                    routes with auth/authz</li>
                <li><strong>React Higher-Order Components (HOC)</strong> ‚Äî Wrap components with context providers</li>
                <li><strong>TypeScript decorators</strong> ‚Äî Could be used for validation, logging (not currently
                    implemented)</li>
            </ul>
            <pre><code><span class="comment">// Decorator Pattern via Axios Interceptors</span>
<span class="keyword">const</span> axiosPrivate = axios.<span class="property">create</span>(config);

<span class="comment">// Decorate request with auth header</span>
axiosPrivate.interceptors.request.<span class="property">use</span>(
  (config) => {
    config.headers[<span class="string">'Authorization'</span>] = <span class="string">`Bearer </span>${accessToken}<span class="string">`</span>;
    <span class="keyword">return</span> config;  <span class="comment">// Decorated request</span>
  }
);

<span class="comment">// Decorate response with token refresh logic</span>
axiosPrivate.interceptors.response.<span class="property">use</span>(
  response => response,
  <span class="keyword">async</span> (error) => {
    <span class="keyword">if</span> (error.response?.status === <span class="number">403</span>) {
      <span class="keyword">await</span> <span class="property">refreshToken</span>();  <span class="comment">// Add retry behavior</span>
    }
  }
);</code></pre>
            <p><strong>Benefits:</strong> Extends functionality without inheritance, follows Open/Closed Principle,
                composable.</p>
        </div>

        <!-- PATTERN 7: Strategy -->
        <div class="advantage-card purple-card" id="pat-strategy">
            <h3><span class="emoji">üéØ</span> Strategy Pattern</h3>
            <p><strong>Purpose:</strong> Define a family of algorithms, encapsulate each one, and make them
                interchangeable.</p>
            <p><strong>Where used:</strong></p>
            <ul>
                <li><strong>Zone type calculations</strong> ‚Äî Different strategies for <code>ZoneType.SAFE</code> vs
                    <code>ZoneType.DANGER</code> geofencing logic
                </li>
                <li><strong>Notification strategies</strong> ‚Äî Different severities (INFO, WARNING, DANGER) trigger
                    different actions</li>
                <li><strong>Sensor validation strategies</strong> ‚Äî Different validation for cattle in different zones
                </li>
                <li><strong>Aggregation strategies</strong> ‚Äî Daily/weekly/monthly sensor data aggregation use different
                    strategies</li>
            </ul>
            <pre><code><span class="comment">// Strategy Pattern for Zone Type Handling</span>
<span class="keyword">static</span> <span class="property">cattleZoneType</span>(data, geofences) {
  <span class="keyword">for</span> (<span class="keyword">const</span> zone <span class="keyword">of</span> geofences) {
    <span class="keyword">if</span> (zone.type === ZoneType.SAFE) {
      <span class="comment">// Strategy 1: Safe zone (check if inside)</span>
      <span class="keyword">if</span> (<span class="keyword">this</span>.<span class="property">isInsideGeofence</span>(data, zone)) {
        <span class="keyword">return</span> ZoneStatus.Safe;
      }
    } <span class="keyword">else if</span> (zone.type === ZoneType.DANGER) {
      <span class="comment">// Strategy 2: Danger zone (check proximity)</span>
      <span class="keyword">const</span> distance = <span class="keyword">this</span>.<span class="property">findDistance</span>(data, zone.center);
      <span class="keyword">if</span> (distance < zone.radius) {
        <span class="keyword">return</span> ZoneStatus.Danger;
      }
    }
  }
}</code></pre>
            <p><strong>Benefits:</strong> Eliminates conditionals, algorithms are interchangeable, easy to add new
                strategies.</p>
        </div>

        <!-- ==================== RECOMMENDED PATTERNS ==================== -->

        <h2 style="color: var(--purple-accent); border-bottom-color: var(--purple-accent); margin-top: 48px;"
            id="pat-recommended">üí° Recommended Patterns for Future (7)</h2>

        <div class="warning-box"
            style="border-left-color: var(--purple-accent); background: var(--purple-light); color: var(--text);">
            <div class="warning-title" style="color: var(--purple-accent);">üí° Future Enhancements</div>
            <p style="margin:0;">The following patterns could improve scalability, maintainability, and feature
                development:</p>
        </div>

        <!-- RECOMMENDED 1: Builder -->
        <div class="advantage-card purple-card">
            <h3><span class="emoji">üî®</span> Builder Pattern</h3>
            <p><strong>Use case:</strong> Constructing complex sensor data queries with many optional parameters.</p>
            <pre><code><span class="comment">// Recommended: Query builder for complex sensor queries</span>
<span class="keyword">class</span> SensorQueryBuilder {
  <span class="keyword">private</span> query = {};

  <span class="property">byDeviceId</span>(deviceId) { <span class="keyword">this</span>.query.deviceId = deviceId; <span class="keyword">return this</span>; }
  <span class="property">byDateRange</span>(start, end) { <span class="keyword">this</span>.query.createdAt = { $gte: start, $lte: end }; <span class="keyword">return this</span>; }
  <span class="property">withHeartRateAbove</span>(threshold) { <span class="keyword">this</span>.query.heartRate = { $gt: threshold }; <span class="keyword">return this</span>; }
  <span class="property">build</span>() { <span class="keyword">return</span> sensorData.<span class="property">find</span>(<span class="keyword">this</span>.query); }
}

<span class="comment">// Clean usage</span>
<span class="keyword">const</span> results = <span class="keyword">await new</span> SensorQueryBuilder()
  .<span class="property">byDeviceId</span>(<span class="number">101</span>)
  .<span class="property">byDateRange</span>(startDate, endDate)
  .<span class="property">withHeartRateAbove</span>(<span class="number">80</span>)
  .<span class="property">build</span>();</code></pre>
            <p><strong>Benefits:</strong> Readable complex queries, fluent API, avoids telescoping constructors.</p>
        </div>

        <!-- RECOMMENDED 2: Command -->
        <div class="advantage-card purple-card">
            <h3><span class="emoji">üìã</span> Command Pattern</h3>
            <p><strong>Use case:</strong> Queue MQTT publish operations, implement retry logic, support undo/redo.</p>
            <pre><code><span class="comment">// Recommended: Command queue for MQTT messages</span>
<span class="keyword">class</span> MqttPublishCommand {
  <span class="property">constructor</span>(topic, message) {
    <span class="keyword">this</span>.topic = topic;
    <span class="keyword">this</span>.message = message;
  }

  <span class="property">execute</span>() {
    mqttClient.<span class="property">publish</span>(<span class="keyword">this</span>.topic, <span class="keyword">this</span>.message);
  }

  <span class="property">undo</span>() {
    <span class="comment">// Publish cancellation or rollback message</span>
  }
}

<span class="keyword">const</span> commandQueue = [];
commandQueue.<span class="property">push</span>(<span class="keyword">new</span> MqttPublishCommand(<span class="string">'control/actuator'</span>, data));
commandQueue.<span class="property">forEach</span>(cmd => cmd.<span class="property">execute</span>());</code></pre>
            <p><strong>Benefits:</strong> Decouples sender from receiver, enables queuing/retry, supports undo/redo.</p>
        </div>

        <!-- RECOMMENDED 3: Adapter -->
        <div class="advantage-card purple-card">
            <h3><span class="emoji">üîå</span> Adapter Pattern</h3>
            <p><strong>Use case:</strong> Support multiple sensor protocols (LoRaWAN, Zigbee, Bluetooth) with unified
                interface.</p>
            <pre><code><span class="comment">// Recommended: Adapter for different sensor protocols</span>
<span class="keyword">interface</span> SensorAdapter {
  <span class="property">connect</span>(): Promise&lt;<span class="keyword">void</span>&gt;;
  <span class="property">readData</span>(): Promise&lt;SensorDataInterface&gt;;
}

<span class="keyword">class</span> MqttSensorAdapter <span class="keyword">implements</span> SensorAdapter {
  <span class="property">async</span> <span class="property">connect</span>() { <span class="comment">/* MQTT connection */</span> }
  <span class="property">async</span> <span class="property">readData</span>() { <span class="comment">/* Parse MQTT message */</span> }
}

<span class="keyword">class</span> LoRaWANSensorAdapter <span class="keyword">implements</span> SensorAdapter {
  <span class="property">async</span> <span class="property">connect</span>() { <span class="comment">/* LoRaWAN connection */</span> }
  <span class="property">async</span> <span class="property">readData</span>() { <span class="comment">/* Parse LoRaWAN payload */</span> }
}</code></pre>
            <p><strong>Benefits:</strong> Supports multiple protocols, easy to swap/extend, follows Interface
                Segregation.</p>
        </div>

        <!-- RECOMMENDED 4: Facade -->
        <div class="advantage-card purple-card">
            <h3><span class="emoji">üé≠</span> Facade Pattern</h3>
            <p><strong>Use case:</strong> Simplify complex health analysis subsystem (sensor checks, geofencing,
                notifications).</p>
            <pre><code><span class="comment">// Recommended: Facade for health analysis system</span>
<span class="keyword">class</span> HealthAnalysisFacade {
  <span class="property">async</span> <span class="property">analyzeHealth</span>(cattleId) {
    <span class="comment">// Hides complexity of multiple subsystems</span>
    <span class="keyword">const</span> sensorData = <span class="keyword">await</span> <span class="keyword">this</span>.<span class="property">getSensorData</span>(cattleId);
    <span class="keyword">const</span> heartRateStatus = CattleSensorData.<span class="property">isHeartRateSafe</span>(sensorData);
    <span class="keyword">const</span> tempStatus = CattleSensorData.<span class="property">isTemperatureSafe</span>(sensorData);
    <span class="keyword">const</span> zoneStatus = <span class="keyword">await</span> <span class="keyword">this</span>.<span class="property">getZoneStatus</span>(sensorData);
    
    <span class="keyword">if</span> (heartRateStatus === <span class="string">'DANGER'</span>) {
      <span class="keyword">await</span> <span class="keyword">this</span>.<span class="property">sendNotification</span>(cattleId, <span class="string">'Heart rate critical'</span>);
    }
    
    <span class="keyword">return</span> { heartRateStatus, tempStatus, zoneStatus };
  }
}

<span class="comment">// Simple interface for complex operation</span>
<span class="keyword">const</span> analysis = <span class="keyword">await</span> healthFacade.<span class="property">analyzeHealth</span>(<span class="number">101</span>);</code></pre>
            <p><strong>Benefits:</strong> Simplifies complex subsystems, reduces coupling, easier to use.</p>
        </div>

        <!-- RECOMMENDED 5: State -->
        <div class="advantage-card purple-card">
            <h3><span class="emoji">üîÑ</span> State Pattern</h3>
            <p><strong>Use case:</strong> Manage cattle health states (Healthy ‚Üí Warning ‚Üí Critical ‚Üí Recovered).</p>
            <pre><code><span class="comment">// Recommended: State pattern for cattle health lifecycle</span>
<span class="keyword">interface</span> HealthState {
  <span class="property">handle</span>(data: SensorDataInterface): HealthState;
  <span class="property">getStatus</span>(): <span class="keyword">string</span>;
}

<span class="keyword">class</span> HealthyState <span class="keyword">implements</span> HealthState {
  <span class="property">handle</span>(data) {
    <span class="keyword">if</span> (data.heartRate > <span class="number">100</span>) <span class="keyword">return new</span> WarningState();
    <span class="keyword">return this</span>;
  }
  <span class="property">getStatus</span>() { <span class="keyword">return</span> <span class="string">'HEALTHY'</span>; }
}

<span class="keyword">class</span> WarningState <span class="keyword">implements</span> HealthState {
  <span class="property">handle</span>(data) {
    <span class="keyword">if</span> (data.heartRate > <span class="number">120</span>) <span class="keyword">return new</span> CriticalState();
    <span class="keyword">if</span> (data.heartRate < <span class="number">90</span>) <span class="keyword">return new</span> HealthyState();
    <span class="keyword">return this</span>;
  }
  <span class="property">getStatus</span>() { <span class="keyword">return</span> <span class="string">'WARNING'</span>; }
}</code></pre>
            <p><strong>Benefits:</strong> Encapsulates state transitions, eliminates complex conditionals, easier to
                extend.</p>
        </div>

        <!-- RECOMMENDED 6: Memento -->
        <div class="advantage-card purple-card">
            <h3><span class="emoji">üíæ</span> Memento Pattern</h3>
            <p><strong>Use case:</strong> Undo/redo geofence edits, save/restore dashboard configurations.</p>
            <pre><code><span class="comment">// Recommended: Memento for geofence history</span>
<span class="keyword">class</span> GeofenceMemento {
  <span class="property">constructor</span>(state) { <span class="keyword">this</span>.state = state; }
  <span class="property">getState</span>() { <span class="keyword">return</span> <span class="keyword">this</span>.state; }
}

<span class="keyword">class</span> GeofenceEditor {
  <span class="property">save</span>() { <span class="keyword">return new</span> GeofenceMemento(<span class="keyword">this</span>.geofence); }
  <span class="property">restore</span>(memento) { <span class="keyword">this</span>.geofence = memento.<span class="property">getState</span>(); }
}

<span class="keyword">const</span> history = [];
history.<span class="property">push</span>(editor.<span class="property">save</span>());  <span class="comment">// Save state</span>
editor.<span class="property">restore</span>(history.<span class="property">pop</span>());  <span class="comment">// Undo</span></code></pre>
            <p><strong>Benefits:</strong> Enables undo/redo, preserves encapsulation, simplifies state restoration.</p>
        </div>

        <!-- RECOMMENDED 7: Proxy -->
        <div class="advantage-card purple-card">
            <h3><span class="emoji">üõ°Ô∏è</span> Proxy Pattern</h3>
            <p><strong>Use case:</strong> Cache threshold values, lazy-load cattle data, add logging to sensitive
                operations.</p>
            <pre><code><span class="comment">// Recommended: Proxy for cached threshold access</span>
<span class="keyword">class</span> ThresholdProxy {
  <span class="keyword">private</span> cache = <span class="keyword">null</span>;
  <span class="keyword">private</span> cacheExpiry = <span class="number">0</span>;

  <span class="property">async</span> <span class="property">getThreshold</span>() {
    <span class="keyword">if</span> (<span class="keyword">this</span>.cache && Date.<span class="property">now</span>() < <span class="keyword">this</span>.cacheExpiry) {
      console.<span class="property">log</span>(<span class="string">'Cache hit'</span>);
      <span class="keyword">return</span> <span class="keyword">this</span>.cache;  <span class="comment">// Return cached</span>
    }

    console.<span class="property">log</span>(<span class="string">'Cache miss ‚Äî fetching from DB'</span>);
    <span class="keyword">this</span>.cache = <span class="keyword">await</span> Threshold.<span class="property">findOne</span>();
    <span class="keyword">this</span>.cacheExpiry = Date.<span class="property">now</span>() + <span class="number">60000</span>;  <span class="comment">// 1 min TTL</span>
    <span class="keyword">return</span> <span class="keyword">this</span>.cache;
  }
}

<span class="keyword">const</span> threshold = <span class="keyword">await</span> thresholdProxy.<span class="property">getThreshold</span>();  <span class="comment">// Transparent caching</span></code></pre>
            <p><strong>Benefits:</strong> Adds caching/logging transparently, controls access, lazy initialization.</p>
        </div>

        <!-- OVERVIEW TABLE: Part 4 -->
        <h3 style="color:var(--purple-accent); margin-bottom:16px;">4.16 Design Patterns Overview</h3>
        <div style="overflow-x:auto;">
            <table class="comparison-table" style="border-top: 3px solid var(--purple-accent);">
                <thead>
                    <tr style="background: var(--purple-light);">
                        <th style="color: var(--purple-tag); width: 25%;">Design Pattern</th>
                        <th style="color: var(--purple-tag); width: 20%;">Category</th>
                        <th style="color: var(--purple-tag); width: 15%;">Status</th>
                        <th style="color: var(--purple-tag);">Where / Why</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td style="font-weight:600;">Singleton</td>
                        <td>Creational</td>
                        <td><span
                                style="background:#dcfce7; color:#166534; padding:2px 8px; border-radius:12px; font-size:11px; font-weight:700;">USED</span>
                        </td>
                        <td><code>MqttHandler</code> & Socket.IO instance</td>
                    </tr>
                    <tr>
                        <td style="font-weight:600;">Observer</td>
                        <td>Behavioral</td>
                        <td><span
                                style="background:#dcfce7; color:#166534; padding:2px 8px; border-radius:12px; font-size:11px; font-weight:700;">USED</span>
                        </td>
                        <td>MQTT Pub/Sub & React Effect dependencies</td>
                    </tr>
                    <tr>
                        <td style="font-weight:600;">Factory</td>
                        <td>Creational</td>
                        <td><span
                                style="background:#dcfce7; color:#166534; padding:2px 8px; border-radius:12px; font-size:11px; font-weight:700;">USED</span>
                        </td>
                        <td>Mongoose Models & Axios Instances</td>
                    </tr>
                    <tr>
                        <td style="font-weight:600;">Repository</td>
                        <td>Data Access</td>
                        <td><span
                                style="background:#dcfce7; color:#166534; padding:2px 8px; border-radius:12px; font-size:11px; font-weight:700;">USED</span>
                        </td>
                        <td>Data access via Mongoose Models</td>
                    </tr>
                    <tr>
                        <td style="font-weight:600;">Chain of Responsibility</td>
                        <td>Behavioral</td>
                        <td><span
                                style="background:#dcfce7; color:#166534; padding:2px 8px; border-radius:12px; font-size:11px; font-weight:700;">USED</span>
                        </td>
                        <td>Express Middleware (Auth ‚Üí Route)</td>
                    </tr>
                    <tr>
                        <td style="font-weight:600;">Builder</td>
                        <td>Creational</td>
                        <td><span
                                style="background:#dbeafe; color:#1e40af; padding:2px 8px; border-radius:12px; font-size:11px; font-weight:700;">RECOMMENDED</span>
                        </td>
                        <td>Constructing complex sensor queries</td>
                    </tr>
                    <tr>
                        <td style="font-weight:600;">Command</td>
                        <td>Behavioral</td>
                        <td><span
                                style="background:#dbeafe; color:#1e40af; padding:2px 8px; border-radius:12px; font-size:11px; font-weight:700;">RECOMMENDED</span>
                        </td>
                        <td>Queuing MQTT publish operations</td>
                    </tr>
                    <tr>
                        <td style="font-weight:600;">Facade</td>
                        <td>Structural</td>
                        <td><span
                                style="background:#dbeafe; color:#1e40af; padding:2px 8px; border-radius:12px; font-size:11px; font-weight:700;">RECOMMENDED</span>
                        </td>
                        <td>Simplifying health analysis subsystems</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- ======================================================= -->
        <!-- PART 5: API REFERENCE                                  -->
        <!-- ======================================================= -->
        <div class="section-divider cyan-section">
            <span class="section-tag">Part 5</span>
            <h2
                style="justify-content:center; border:none; padding:0; margin:8px 0 28px; border-bottom:2px solid var(--cyan-accent);">
                API Reference</h2>
        </div>

        <p style="font-size: 15px; color: var(--text-secondary); margin-bottom: 32px;">
            Comprehensive documentation of all <strong>40+ API endpoints</strong> organized by domain.
        </p>

        <!-- API GROUP 1: Authentication -->
        <div class="advantage-card cyan-card" id="api-auth">
            <h3><span class="emoji">üîê</span> Authentication APIs</h3>
            <p><strong>Base URL:</strong> <code>/api/auth</code></p>
            <table class="comparison-table">
                <thead>
                    <tr>
                        <th style="width:15%">Method</th>
                        <th style="width:35%">Endpoint</th>
                        <th style="width:15%">Auth</th>
                        <th>Description</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><span class="string" style="font-weight:bold">POST</span></td>
                        <td><code>/login</code></td>
                        <td>Public</td>
                        <td>Authenticate user & get tokens</td>
                    </tr>
                    <tr>
                        <td><span class="string" style="font-weight:bold">GET</span></td>
                        <td><code>/refresh</code></td>
                        <td>Public</td>
                        <td>Refresh access token via cookie</td>
                    </tr>
                    <tr>
                        <td><span class="string" style="font-weight:bold">GET</span></td>
                        <td><code>/logout</code></td>
                        <td>Public</td>
                        <td>Clear refresh token cookie</td>
                    </tr>
                    <tr>
                        <td><span class="keyword" style="font-weight:bold">GET</span></td>
                        <td><code>/user-details</code></td>
                        <td>JWT</td>
                        <td>Get current user profile</td>
                    </tr>
                    <tr>
                        <td><span class="string" style="font-weight:bold">POST</span></td>
                        <td><code>/change-password</code></td>
                        <td>JWT</td>
                        <td>Update current user password</td>
                    </tr>
                    <tr>
                        <td><span class="string" style="font-weight:bold">POST</span></td>
                        <td><code>/create-user</code></td>
                        <td>Admin</td>
                        <td>Register new user</td>
                    </tr>
                    <tr>
                        <td><span class="keyword" style="font-weight:bold">GET</span></td>
                        <td><code>/users</code></td>
                        <td>Admin</td>
                        <td>List all registered users</td>
                    </tr>
                    <tr>
                        <td><span class="property" style="font-weight:bold">PUT</span></td>
                        <td><code>/users/:id</code></td>
                        <td>Admin</td>
                        <td>Update user details</td>
                    </tr>
                    <tr>
                        <td><span class="property" style="font-weight:bold">PUT</span></td>
                        <td><code>/users/:id/role</code></td>
                        <td>Admin</td>
                        <td>Update user role (Admin/User)</td>
                    </tr>
                    <tr>
                        <td><span class="number" style="font-weight:bold">DELETE</span></td>
                        <td><code>/users/:id</code></td>
                        <td>Admin</td>
                        <td>Remove a user account</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- API GROUP 2: Cattle Management -->
        <div class="advantage-card cyan-card" id="api-cattle">
            <h3><span class="emoji">üêÑ</span> Cattle Management APIs</h3>
            <p><strong>Base URL:</strong> <code>/api/cattle</code></p>
            <table class="comparison-table">
                <thead>
                    <tr>
                        <th style="width:15%">Method</th>
                        <th style="width:35%">Endpoint</th>
                        <th>Description</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><span class="keyword" style="font-weight:bold">GET</span></td>
                        <td><code>/</code></td>
                        <td>Get all registered cattle</td>
                    </tr>
                    <tr>
                        <td><span class="keyword" style="font-weight:bold">GET</span></td>
                        <td><code>/:cattleId</code></td>
                        <td>Get specific cattle details</td>
                    </tr>
                    <tr>
                        <td><span class="string" style="font-weight:bold">POST</span></td>
                        <td><code>/</code></td>
                        <td>Register new cattle (links deviceId)</td>
                    </tr>
                    <tr>
                        <td><span class="property" style="font-weight:bold">PUT</span></td>
                        <td><code>/:tagId</code></td>
                        <td>Update cattle name or tag</td>
                    </tr>
                    <tr>
                        <td><span class="number" style="font-weight:bold">DELETE</span></td>
                        <td><code>/:cattleId</code></td>
                        <td>Delete cattle & cascade delete sensor data</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- API GROUP 3: Sensor Data -->
        <div class="advantage-card cyan-card" id="api-sensor">
            <h3><span class="emoji">üì°</span> Sensor Data APIs</h3>
            <p><strong>Base URL:</strong> <code>/api/sensorData</code></p>
            <table class="comparison-table">
                <thead>
                    <tr>
                        <th style="width:15%">Method</th>
                        <th style="width:35%">Endpoint</th>
                        <th>Description</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><span class="keyword" style="font-weight:bold">GET</span></td>
                        <td><code>/</code></td>
                        <td>Get all raw sensor data history</td>
                    </tr>
                    <tr>
                        <td><span class="keyword" style="font-weight:bold">GET</span></td>
                        <td><code>/latest</code></td>
                        <td>Get latest reading per device (Real-time + DB)</td>
                    </tr>
                    <tr>
                        <td><span class="keyword" style="font-weight:bold">GET</span></td>
                        <td><code>/withCattle</code></td>
                        <td>Get all sensor data enriched with cattle info</td>
                    </tr>
                    <tr>
                        <td><span class="keyword" style="font-weight:bold">GET</span></td>
                        <td><code>/latestWithCattle</code></td>
                        <td>Latest readings enriched with cattle info</td>
                    </tr>
                    <tr>
                        <td><span class="keyword" style="font-weight:bold">GET</span></td>
                        <td><code>/latest/:cattleId</code></td>
                        <td>Get latest reading for specific cattle</td>
                    </tr>
                    <tr>
                        <td><span class="keyword" style="font-weight:bold">GET</span></td>
                        <td><code>/daily-averages/:cid</code></td>
                        <td>Get 7-day trend (Avg HR/Temp) for chart</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- API GROUP 4: Geofence -->
        <div class="advantage-card cyan-card" id="api-geofence">
            <h3><span class="emoji">üåç</span> Geofence APIs</h3>
            <p><strong>Base URL:</strong> <code>/api/geoFence</code></p>
            <table class="comparison-table">
                <thead>
                    <tr>
                        <th style="width:15%">Method</th>
                        <th style="width:35%">Endpoint</th>
                        <th>Description</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><span class="keyword" style="font-weight:bold">GET</span></td>
                        <td><code>/</code></td>
                        <td>Get all defined geofences</td>
                    </tr>
                    <tr>
                        <td><span class="string" style="font-weight:bold">POST</span></td>
                        <td><code>/new</code></td>
                        <td>Create new geofence (Circle/Polygon)</td>
                    </tr>
                    <tr>
                        <td><span class="number" style="font-weight:bold">DELETE</span></td>
                        <td><code>/delete</code></td>
                        <td>Delete a geofence</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- API GROUP 5: Thresholds -->
        <div class="advantage-card cyan-card" id="api-threshold">
            <h3><span class="emoji">üìè</span> Threshold APIs</h3>
            <p><strong>Base URL:</strong> <code>/api/sensorThreshold</code></p>
            <table class="comparison-table">
                <thead>
                    <tr>
                        <th style="width:15%">Method</th>
                        <th style="width:35%">Endpoint</th>
                        <th>Description</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><span class="keyword" style="font-weight:bold">GET</span></td>
                        <td><code>/</code></td>
                        <td>Get current safety thresholds</td>
                    </tr>
                    <tr>
                        <td><span class="property" style="font-weight:bold">PUT</span></td>
                        <td><code>/update</code></td>
                        <td>Update Min/Max Heart Rate & Temperature</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- API GROUP 6: Notifications -->
        <div class="advantage-card cyan-card" id="api-notifications">
            <h3><span class="emoji">üîî</span> Notification APIs</h3>
            <p><strong>Base URL:</strong> <code>/api/notifications</code></p>
            <table class="comparison-table">
                <thead>
                    <tr>
                        <th style="width:15%">Method</th>
                        <th style="width:35%">Endpoint</th>
                        <th>Description</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><span class="keyword" style="font-weight:bold">GET</span></td>
                        <td><code>/</code></td>
                        <td>Get all system notifications</td>
                    </tr>
                    <tr>
                        <td><span class="string" style="font-weight:bold">POST</span></td>
                        <td><code>/markAllRead</code></td>
                        <td>Mark all as read</td>
                    </tr>
                    <tr>
                        <td><span class="string" style="font-weight:bold">POST</span></td>
                        <td><code>/:id/markRead</code></td>
                        <td>Mark specific notification as read</td>
                    </tr>
                    <tr>
                        <td><span class="number" style="font-weight:bold">DELETE</span></td>
                        <td><code>/clearAll</code></td>
                        <td>Delete all notifications</td>
                    </tr>
                    <tr>
                        <td><span class="number" style="font-weight:bold">DELETE</span></td>
                        <td><code>/:id</code></td>
                        <td>Delete specific notification</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- API GROUP 7: Map & Config -->
        <div class="advantage-card cyan-card" id="api-config">
            <h3><span class="emoji">‚öôÔ∏è</span> Map & Config APIs</h3>
            <p><strong>Base URLs:</strong> <code>/api/map</code>, <code>/api/receiverConfig</code></p>
            <table class="comparison-table">
                <thead>
                    <tr>
                        <th style="width:15%">Method</th>
                        <th style="width:35%">Endpoint</th>
                        <th>Description</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><span class="keyword" style="font-weight:bold">GET</span></td>
                        <td><code>/api/map/</code></td>
                        <td>Get combined map data (Cattle + Geofences)</td>
                    </tr>
                    <tr>
                        <td><span class="keyword" style="font-weight:bold">GET</span></td>
                        <td><code>/api/receiverConfig/</code></td>
                        <td>Get current receiver configuration</td>
                    </tr>
                    <tr>
                        <td><span class="string" style="font-weight:bold">POST</span></td>
                        <td><code>/api/receiverConfig/new-config</code></td>
                        <td>Update receiver settings</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- OVERVIEW TABLE: Part 5 -->
        <h3 style="color:var(--cyan-accent); margin-bottom:16px;">4.16 API Reference Overview</h3>
        <div style="overflow-x:auto;">
            <table class="comparison-table" style="border-top: 3px solid var(--cyan-accent);">
                <thead>
                    <tr style="background: var(--cyan-light);">
                        <th style="color: var(--cyan-tag); width: 25%;">Domain</th>
                        <th style="color: var(--cyan-tag); width: 20%;">Auth Level</th>
                        <th style="color: var(--cyan-tag); width: 15%;">Endpoints</th>
                        <th style="color: var(--cyan-tag);">Key Functionality</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td style="font-weight:600;">Authentication</td>
                        <td>Mixed</td>
                        <td><span
                                style="background:#dcfce7; color:#166534; padding:2px 8px; border-radius:12px; font-size:11px; font-weight:700;">10+</span>
                        </td>
                        <td>Login, User Management, Role Control</td>
                    </tr>
                    <tr>
                        <td style="font-weight:600;">Cattle Management</td>
                        <td>Protected</td>
                        <td><span
                                style="background:#dcfce7; color:#166534; padding:2px 8px; border-radius:12px; font-size:11px; font-weight:700;">5</span>
                        </td>
                        <td>Register, Update, Delete Cattle & Devices</td>
                    </tr>
                    <tr>
                        <td style="font-weight:600;">Sensor Data</td>
                        <td>Protected</td>
                        <td><span
                                style="background:#dcfce7; color:#166534; padding:2px 8px; border-radius:12px; font-size:11px; font-weight:700;">6</span>
                        </td>
                        <td>Real-time readings, History, Aggregation</td>
                    </tr>
                    <tr>
                        <td style="font-weight:600;">Geofencing</td>
                        <td>Protected</td>
                        <td><span
                                style="background:#dcfce7; color:#166534; padding:2px 8px; border-radius:12px; font-size:11px; font-weight:700;">3</span>
                        </td>
                        <td>Create/Manage Virtual Fences</td>
                    </tr>
                    <tr>
                        <td style="font-weight:600;">Notifications</td>
                        <td>Protected</td>
                        <td><span
                                style="background:#dcfce7; color:#166534; padding:2px 8px; border-radius:12px; font-size:11px; font-weight:700;">5</span>
                        </td>
                        <td>Alert Management (Read/Delete)</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- Footer -->
        <div class="report-footer">
            <p>Cattle Management System ‚Äî e20-3yp &nbsp;|&nbsp; Database & Architecture Analysis Report</p>
            <p style="margin-top:4px;">Generated on February 14, 2026</p>
        </div>
    </div>

    <script>
        function toggleTheme() {
            const html = document.documentElement;
            const current = html.getAttribute('data-theme');
            const next = current === 'dark' ? 'light' : 'dark';
            html.setAttribute('data-theme', next);
            document.getElementById('themeIcon').textContent = next === 'dark' ? '‚òÄÔ∏è' : 'üåô';
            document.getElementById('themeLabel').textContent = next === 'dark' ? 'Light Mode' : 'Dark Mode';
            localStorage.setItem('theme', next);
        }

        // Load saved preference
        (function () {
            const saved = localStorage.getItem('theme');
            if (saved === 'dark') {
                document.documentElement.setAttribute('data-theme', 'dark');
                document.getElementById('themeIcon').textContent = '‚òÄÔ∏è';
                document.getElementById('themeLabel').textContent = 'Light Mode';
            }
        })();

        // Highlight active sidebar link on scroll
        const sections = document.querySelectorAll('[id^="sec-"], [id^="oop-"]');
        const sidebarLinks = document.querySelectorAll('.sidebar-link');

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    sidebarLinks.forEach(link => {
                        link.style.color = '';
                        link.style.borderLeftColor = 'transparent';
                    });
                    const activeLink = document.querySelector(`.sidebar-link[href="#${entry.target.id}"]`);
                    if (activeLink) {
                        activeLink.style.color = 'var(--sidebar-active)';
                        activeLink.style.borderLeftColor = 'var(--sidebar-active)';
                    }
                }
            });
        }, { threshold: 0.3, rootMargin: '-20px' });

        sections.forEach(section => observer.observe(section));
    </script>
</body>

</html>